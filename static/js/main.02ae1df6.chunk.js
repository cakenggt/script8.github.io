(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,_){"use strict";var r=_(7),n=_(11),a=_(5),s=_(0),o=_.n(s),i=_(22),l={octaves:4,volumes:8,phrases:64,chains:64,songs:8,matrixLength:16,chainChannels:4,startOffset:"+0.1",startOffsetDouble:"+0.5",bpm:144,subdivision:"4n"},c={volume:function(e){return(e+1)/l.volumes},note:function(e){return e}},u={oscillator:{type:"triangle"},envelope:{release:.07}},d=function(e){return[1,2,3,5,8,13,21,34][e]},h=function(e){var t=new a.Synth(u);return e?t.chain(e,a.Master):t.chain(a.Master),t},E=function(e){var t=e.note,_=e.octave,r=e.volume,n=e.time,s=void 0===n?a.context.currentTime:n,o=e.synth,l=e.tempo;if(s>=a.context.currentTime){var u=c.volume(r),h=Object(i.a)(t+12*_,!0,!0),E=function(e){return 4*d(e)+"n"}(l);o.triggerAttackRelease(h,E,s,u)}};t.a=function(e){var t=o.a.range(l.chainChannels).map(function(){return h(e)}),_=h(e);a.Transport.bpm.value=l.bpm,a.Transport.start(l.startOffset);var s={},i={},c=[],u=function(){o.a.forEach(s,function(e,t){var _=e.sequence;_&&_.stop()})},p=function(e){var _=e.song,a=e.chains,s=e.phrases,i=o()(o.a.range(Math.pow(l.matrixLength,3))).map(function(e){var t=o.a.padStart(e.toString(l.matrixLength),3,0).split("").map(function(e){return parseInt(e,l.matrixLength)}),r=Object(n.a)(t,3),i=r[0],c=r[1],u=r[2],d=o.a.get(_,i),h=o.a.get(a,d),E=o.a.get(h,c);return o.a.range(l.chainChannels).map(function(e){var t,_=o.a.get(E,e);if(!o.a.isNil(_)){var r=o.a.get(s,_,{}),n=o.a.get(r.notes,u);o.a.isNil(n)||(t={channel:e,noteElement:n})}return t}).filter(function(e){return e})}).dropRightWhile(o.a.isEmpty).value();return{callback:function(e,_){i[_].forEach(function(_){var n=_.channel,a=_.noteElement;E(Object(r.a)({},a,{time:e,synth:t[n],tempo:0}))})},events:o.a.range(i.length),sequence:null}};return{playSong:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];u(),o.a.forEach(s,function(_,r){+r===e&&(_.sequence=new a.Sequence(_.callback,_.events,l.subdivision),_.sequence.loop=t,_.sequence.playbackRate=d(0),_.sequence.start(l.startOffset))})},makeSongs:function(e){var t=e.songs,_=e.chains,r=e.phrases;u(),i=r,s=o.a.mapValues(t,function(e){return p({song:e,chains:_,phrases:r})})},stopSong:u,playPhrase:function(e){var t=o.a.get(i,e);if(t){for(;c.length;)c.pop().dispose();var n=t.tempo,s=new a.Sequence(function(e,a){var s=t.notes[a];s&&E(Object(r.a)({},s,{time:e,synth:_,tempo:n}))},o.a.range(l.matrixLength),l.subdivision);s.loop=!1,s.playbackRate=d(n),s.start(),c.push(s)}}}}},105:function(e,t,_){e.exports=_(106)},106:function(e,t,_){"use strict";_.r(t);var r=_(1),n=_.n(r),a=_(72),s=_.n(a),o=_(73);s.a.render(n.a.createElement(o.a,null),document.getElementById("root"))},13:function(e){e.exports={a:"0.1.248"}},210:function(e,t,_){},22:function(e,t,_){"use strict";_.d(t,"b",function(){return n});var r=["c","c#","d","d#","e","f","f#","g","g#","a","a#","b"],n=function(e){return r.indexOf(e)};t.a=function(e,t,_){var n=function(e){return r[e%r.length]}(e),a=function(e){return Math.floor(e/r.length)}(e)+(_?2:0);return t?"".concat(n).concat(a):n}},3:function(e,t,_){"use strict";for(var r=_(11),n=[[246,214,189],[195,163,138],[153,117,119],[129,98,113],[78,73,95],[32,57,79],[15,42,63],[8,20,30]],a=n.map(function(e){var t=Object(r.a)(e,3),_=t[0],n=t[1],a=t[2];return"rgb(".concat(_,",").concat(n,",").concat(a,")")}),s=[],o=0;o<8;o++){var i=n[o],l=255<<24|i[2]<<16|i[1]<<8|i[0];s[o]=l>>>0}for(var c={},u=0;u<8;u++)c[s[u]]=u;var d={rgb:function(e){return a[e%a.length]},triplet:function(e){return n[e%n.length]},int:function(e){return s[e%s.length]},lookupInt:function(e){return e in c?c[e]:7}};t.a=d},31:function(e,t,_){"use strict";t.a="init = () => ({\n})\n\nupdate = (state, input, elapsed) => ({\n  ...state,\n})\n\ndrawActors = (state, fade) =>\n  state.actors && state.actors.forEach(actor =>\n    sprite(\n      actor.x,\n      actor.y,\n      actor.sprite,\n      fade ? actor.trailBrighten || -3 : actor.brighten,\n      actor.flipH,\n      actor.flipV\n    )\n  )\n\ndraw = state => {\n  camera()\n  clear()\n}"},33:function(e,t,_){"use strict";_.d(t,"a",function(){return n});var r={},n=["mousedown","ArrowUp","ArrowRight","ArrowDown","ArrowLeft","a","b","Enter"," "];t.b=function(e){for(var t=(window.navigator.getGamepads&&window.navigator.getGamepads()[0]||{}).buttons,_={__mousedown:e.has("mousedown"),up:e.has("ArrowUp")||t&&t[12].pressed,right:e.has("ArrowRight")||t&&t[15].pressed,down:e.has("ArrowDown")||t&&t[13].pressed,left:e.has("ArrowLeft")||t&&t[14].pressed,a:e.has("a")||t&&(t[1].pressed||t[2].pressed),b:e.has("b")||t&&(t[0].pressed||t[3].pressed),start:e.has("Enter")||t&&t[9].pressed,select:e.has(" ")||t&&t[8].pressed},n=Object.keys(_),a=0;a<n.length;a++){var s=n[a];if(!s.startsWith("__")){var o=!r[s]&&_[s];_[s+"Pressed"]=o;var i=r[s]&&!_[s];_[s+"Released"]=i}}return r=_,_}},49:function(e,t,_){"use strict";var r=_(30),n=_(4),a=_(7),s=_(0),o=_.n(s),i=function(e){return e.length||e.push(0),e.reduce(function(e,t,_){if(_>0){var r=e[_-1];return[].concat(Object(n.a)(e),[[r[1],r[1]+t]])}return[[0,t]]},[])};_.d(t,"b",function(){return c}),_.d(t,"a",function(){return l});var l=function(e){return o()(e).orderBy(function(e,t){return t}).map("text").filter(function(e){return!o.a.isEmpty(e)}).value().join("\n")},c=function(e){var t=JSON.parse(o.a.get(e,'files["misc.json"].content',"{}")),_=o.a.get(e,'files["code.js"].content',"");if(t.lines){var s=i(t.lines),l=_.split("\n");return s.reduce(function(e,t,_){return Object(a.a)({},e,Object(r.a)({},_,{text:l.slice.apply(l,Object(n.a)(t)).join("\n"),active:0===_,key:_}))},{})}return{0:{text:_,active:!0,key:0}}}},73:function(module,__webpack_exports__,__webpack_require__){"use strict";var _Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(102),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(74),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(75),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(103),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(76),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(2),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(104),react__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_9__),classnames__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(12),classnames__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_10__),deep_equal__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(6),deep_equal__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(deep_equal__WEBPACK_IMPORTED_MODULE_11__),tone__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5),tone__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(tone__WEBPACK_IMPORTED_MODULE_12__),d3_timer__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(100),redux__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(14),lodash__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(0),lodash__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_15__),lodash_sum__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(79),lodash_sum__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(lodash_sum__WEBPACK_IMPORTED_MODULE_16__),lodash_range__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(32),lodash_range__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(lodash_range__WEBPACK_IMPORTED_MODULE_17__),lodash_flatten__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(48),lodash_flatten__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(lodash_flatten__WEBPACK_IMPORTED_MODULE_18__),lodash_random__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(80),lodash_random__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(lodash_random__WEBPACK_IMPORTED_MODULE_19__),lodash_clamp__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(16),lodash_clamp__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(lodash_clamp__WEBPACK_IMPORTED_MODULE_20__),lodash_once__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(81),lodash_once__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(lodash_once__WEBPACK_IMPORTED_MODULE_21__),lodash_uniqBy__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(82),lodash_uniqBy__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(lodash_uniqBy__WEBPACK_IMPORTED_MODULE_22__),lodash_isEmpty__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(83),lodash_isEmpty__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_23__),lodash_chunk__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(84),lodash_chunk__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(lodash_chunk__WEBPACK_IMPORTED_MODULE_24__),_utils_bios_js__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(85),javascript_state_machine__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(86),javascript_state_machine__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(javascript_state_machine__WEBPACK_IMPORTED_MODULE_26__),_soundAPI_index_js__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(101),_frameBufferCanvasAPI_index_js__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(98),_contextCanvasAPI_index_js__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(99),_contextCanvasAPI_trimCanvas_js__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(87),_validateToken_js__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(88),_getUserInput_js__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(33),_createReducer_js__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(89),_skeleton_js__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(31),_gistParsers_map_js__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(90),_gistParsers_sprites_js__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(91),_gistParsers_phrases_js__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(92),_gistParsers_chains_js__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(94),_gistParsers_songs_js__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(95),_gistParsers_game_js__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(49),_utils_errorLocation_js__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(96),_css_Iframe_css__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(210),_css_Iframe_css__WEBPACK_IMPORTED_MODULE_42___default=__webpack_require__.n(_css_Iframe_css__WEBPACK_IMPORTED_MODULE_42__),_package_json__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(13),_package_json__WEBPACK_IMPORTED_MODULE_43___namespace=__webpack_require__.t(13,1),platform=window.navigator.platform;console.log(JSON.stringify("SCRIPT-8 iframe v ".concat(_package_json__WEBPACK_IMPORTED_MODULE_43__.a),null,2));var getUniqueErrorMessages=function(e){return lodash__WEBPACK_IMPORTED_MODULE_15___default()(e).map(function(e,t){return{type:t,data:e}}).filter(function(e){return e.data&&e.type}).sortBy("type").uniqBy(function(e){return JSON.stringify(e.data)}).value()};window.init=null,window.update=null,window.drawActors=null,window.draw=null,window._script8={embedState:{},reservedTokens:new Set(["init","update","drawActors","draw"])};var NOOP=function(){},FPS=60,REDUX_HISTORY_SECONDS=2,CANVAS_SIZE=128,ACTOR_FRAME_SKIP=5,Iframe=function(_Component){function Iframe(e){var t;return Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.a)(this,Iframe),(t=Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__.a)(this,Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__.a)(Iframe).call(this,e))).ArrowUpElement=null,t.setArrowUpRef=function(e){t.ArrowUpElement=e},t.ArrowRightElement=null,t.setArrowRightRef=function(e){t.ArrowRightElement=e},t.ArrowDownElement=null,t.setArrowDownRef=function(e){t.ArrowDownElement=e},t.ArrowLeftElement=null,t.setArrowLeftRef=function(e){t.ArrowLeftElement=e},t.aElement=null,t.setaRef=function(e){t.aElement=e},t.bElement=null,t.setbRef=function(e){t.bElement=e},t.EnterElement=null,t.setEnterRef=function(e){t.EnterElement=e},t.SpaceElement=null,t.setSpaceRef=function(e){t.SpaceElement=e},t.touchstartArrowUp=t.touchstartArrowUp.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchstartArrowRight=t.touchstartArrowRight.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchstartArrowDown=t.touchstartArrowDown.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchstartArrowLeft=t.touchstartArrowLeft.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchstarta=t.touchstarta.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchstartb=t.touchstartb.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchstartEnter=t.touchstartEnter.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchstartSpace=t.touchstartSpace.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchendArrowUp=t.touchendArrowUp.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchendArrowRight=t.touchendArrowRight.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchendArrowDown=t.touchendArrowDown.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchendArrowLeft=t.touchendArrowLeft.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchenda=t.touchenda.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchendb=t.touchendb.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchendEnter=t.touchendEnter.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchendSpace=t.touchendSpace.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.sendLogToParent=t.sendLogToParent.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.log=null,t.sendErrorToParent=t.sendErrorToParent.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.loggerErrors={},t.printErrorsToCassetteScreen=t.printErrorsToCassetteScreen.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.updateGlobals=t.updateGlobals.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.evalCode=t.evalCode.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.startTimer=t.startTimer.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.handleTimelineInput=t.handleTimelineInput.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.handleActorClick=t.handleActorClick.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.handlePauseClick=t.handlePauseClick.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.handleRestartClick=t.handleRestartClick.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.heightSent=0,t.shadows=new Set(["document"]),t.blacklist=new Set(["eval","alert","_script8"]),t.keys=new Set,t.timer=null,t.previousElapsed=0,t.pastFpsValues=[],t.volumeNode=new tone__WEBPACK_IMPORTED_MODULE_12__.Volume,t.reducer=Object(_createReducer_js__WEBPACK_IMPORTED_MODULE_33__.a)(t.sendErrorToParent),t.store=null,t.previousInitString=null,t.reduxHistory=[],t.reduxLogger=function(e){return function(_){return function(r){return t.reduxHistory=[].concat(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__.a)(t.reduxHistory),[{state:e.getState(),action:r}]).slice(-FPS*REDUX_HISTORY_SECONDS),_(r)}}},t.soundFunctions=null,t.songSequences=null,t.state={started:!1,fps:null,game:"",sprites:{},map:{},songs:{},chains:{},phrases:{},timelineIndex:0,actors:[],selectedActors:[],message:null,callbacks:{},isPaused:!1,alteredStates:[],run:!0,sound:!0},t._pixelData=new ImageData(CANVAS_SIZE,CANVAS_SIZE),t._pixelBuffer=new ArrayBuffer(4*CANVAS_SIZE*CANVAS_SIZE),t._pixelBytes=new Uint8ClampedArray(t._pixelBuffer),t._pixelIntegers=new Uint32Array(t._pixelBuffer),t}return Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_8__.a)(Iframe,_Component),Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__.a)(Iframe,[{key:"touchstartArrowUp",value:function(){this.ArrowUpElement.classList.add("on"),this.keys.add("ArrowUp")}},{key:"touchstartArrowRight",value:function(){this.ArrowRightElement.classList.add("on"),this.keys.add("ArrowRight")}},{key:"touchstartArrowDown",value:function(){this.ArrowDownElement.classList.add("on"),this.keys.add("ArrowDown")}},{key:"touchstartArrowLeft",value:function(){this.ArrowLeftElement.classList.add("on"),this.keys.add("ArrowLeft")}},{key:"touchstarta",value:function(){this.aElement.classList.add("on"),this.keys.add("a")}},{key:"touchstartb",value:function(){this.bElement.classList.add("on"),this.keys.add("b")}},{key:"touchstartEnter",value:function(){this.EnterElement.classList.add("on"),this.keys.add("Enter")}},{key:"touchstartSpace",value:function(){this.SpaceElement.classList.add("on"),this.keys.add(" ")}},{key:"touchendArrowUp",value:function(){this.ArrowUpElement.classList.remove("on"),this.keys.delete("ArrowUp")}},{key:"touchendArrowRight",value:function(){this.ArrowRightElement.classList.remove("on"),this.keys.delete("ArrowRight")}},{key:"touchendArrowDown",value:function(){this.ArrowDownElement.classList.remove("on"),this.keys.delete("ArrowDown")}},{key:"touchendArrowLeft",value:function(){this.ArrowLeftElement.classList.remove("on"),this.keys.delete("ArrowLeft")}},{key:"touchenda",value:function(){this.aElement.classList.remove("on"),this.keys.delete("a")}},{key:"touchendb",value:function(){this.bElement.classList.remove("on"),this.keys.delete("b")}},{key:"touchendEnter",value:function(){this.EnterElement.classList.remove("on"),this.keys.delete("Enter")}},{key:"touchendSpace",value:function(){this.SpaceElement.classList.remove("on"),this.keys.delete(" ")}},{key:"sendLogToParent",value:function(e){if(console.log(e),!this.isEmbed){var t=this.state,_=t.message;t.run||lodash__WEBPACK_IMPORTED_MODULE_15___default.a.isNil(e)||JSON.stringify(this.log)!==JSON.stringify(this.value)&&(this.log=e,_.ports[0].postMessage({log:this.log}))}}},{key:"sendErrorToParent",value:function(e){var t=e.type,_=e.error,r=void 0===_?null:_,n=this.state,a=n.message,s=n.run;if(r){var o={message:r.message,position:Object(_utils_errorLocation_js__WEBPACK_IMPORTED_MODULE_41__.a)(r)};o.message.startsWith("enhancer(...) is not a function")&&(o.message="The init or update functions are invalid."),JSON.stringify(this.loggerErrors[t])!==JSON.stringify(o)&&(this.loggerErrors[t]=o,this.isEmbed||a.ports[0].postMessage({errors:getUniqueErrorMessages(this.loggerErrors)}))}else this.loggerErrors[t]&&(this.loggerErrors[t]=null,this.isEmbed||a.ports[0].postMessage({errors:getUniqueErrorMessages(this.loggerErrors)}));s&&this.printErrorsToCassetteScreen()}},{key:"printErrorsToCassetteScreen",value:function(){var e=getUniqueErrorMessages(this.loggerErrors).map(function(e){return"error: ".concat(e.data.message)}).join(". ");e.length&&(lodash_chunk__WEBPACK_IMPORTED_MODULE_24___default()(e,32).forEach(function(e,t){var _=e.join("");lodash_range__WEBPACK_IMPORTED_MODULE_17___default()(3).forEach(function(e){lodash_range__WEBPACK_IMPORTED_MODULE_17___default()(3).forEach(function(r){window.print(1+e,1+r+8*t,_,7)})}),window.print(2,2+8*t,_,0)}),this.useFrameBufferRenderer&&this.writePixelDataToCanvas())}},{key:"updateGlobals",value:function(e){var t;if(e)t=e;else{var _=this.useFrameBufferRenderer?_frameBufferCanvasAPI_index_js__WEBPACK_IMPORTED_MODULE_28__.a:_contextCanvasAPI_index_js__WEBPACK_IMPORTED_MODULE_29__.a;t=Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__.a)({console:console,StateMachine:javascript_state_machine__WEBPACK_IMPORTED_MODULE_26___default.a,JSON:JSON,Math:Math,Object:Object,Array:Array,log:this.sendLogToParent},_({pixels:this._pixelIntegers,ctx:this._canvas.getContext("2d"),width:CANVAS_SIZE,height:CANVAS_SIZE,sprites:this.state.sprites,map:this.state.map}),{range:lodash_range__WEBPACK_IMPORTED_MODULE_17___default.a,flatten:lodash_flatten__WEBPACK_IMPORTED_MODULE_18___default.a,random:lodash_random__WEBPACK_IMPORTED_MODULE_19___default.a,clamp:lodash_clamp__WEBPACK_IMPORTED_MODULE_20___default.a})}Object.keys(t).forEach(function(e){window[e]=t[e],window._script8.reservedTokens.add(e)})}},{key:"writePixelDataToCanvas",value:function(){this._pixelData.data.set(this._pixelBytes),this._canvas.getContext("2d").putImageData(this._pixelData,0,0)}},{key:"drawUserGraphics",value:function(e){window.draw&&(window.draw(e),this.useFrameBufferRenderer&&this.writePixelDataToCanvas())}},{key:"componentDidMount",value:function(){var e=this;window.USE_FRAME_BUFFER_RENDERER&&(this.useFrameBufferRenderer=!0),this.soundFunctions=Object(_soundAPI_index_js__WEBPACK_IMPORTED_MODULE_27__.a)(this.volumeNode),this.updateGlobals({playSong:this.soundFunctions.playSong,playPhrase:this.soundFunctions.playPhrase,stopSong:this.soundFunctions.stopSong}),this.mousedownHandler=function(){e.keys.add("mousedown")},this.mouseupHandler=function(){e.keys.delete("mousedown")},this.keydownHandler=function(t){var _=t.altKey,r=t.metaKey,n=t.ctrlKey,a=t.key,s=e.state.message;(!e.isEmbed&&r&&"s"===a&&lodash__WEBPACK_IMPORTED_MODULE_15___default.a.includes(platform,"Mac")||n&&"s"===a&&!lodash__WEBPACK_IMPORTED_MODULE_15___default.a.includes(platform,"Mac"))&&(t.preventDefault(),s.ports[0].postMessage({shortcut:"save"})),!e.isEmbed&&_&&("."===a&&(t.preventDefault(),s.ports[0].postMessage({shortcut:"previous"})),"/"===a&&(t.preventDefault(),s.ports[0].postMessage({shortcut:"next"}))),_getUserInput_js__WEBPACK_IMPORTED_MODULE_32__.a.includes(a)&&(t.preventDefault(),t.stopPropagation()),e.keys.add(a)},this.keyupHandler=function(t){var _=t.key;_getUserInput_js__WEBPACK_IMPORTED_MODULE_32__.a.includes(_)&&(t.preventDefault(),t.stopPropagation()),e.keys.delete(_)},document.addEventListener("touchstart",this.mousedownHandler),document.addEventListener("mousedown",this.mousedownHandler),document.addEventListener("touchend",this.mouseupHandler),document.addEventListener("mouseup",this.mouseupHandler),document.addEventListener("keydown",this.keydownHandler),document.addEventListener("keyup",this.keyupHandler);var t=function(t){var _=t.data,r=_.type,n=Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__.a)(_,["type"]),a=e.blacklist,s=e.shadows;if("callCode"===r)n.useFrameBufferRenderer&&(e.useFrameBufferRenderer=!0,e.updateGlobals()),e.setState(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__.a)({},n,{message:t}));else if("findInvalidToken"===r){var o=n.tokens.findIndex(function(e){return!Object(_validateToken_js__WEBPACK_IMPORTED_MODULE_31__.a)({token:e,blacklist:a,globals:window._script8.reservedTokens,shadows:s})});t.ports[0].postMessage(o)}else if("image"===r){var i=document.createElement("canvas");i.width=128,i.height=128,i.getContext("2d").drawImage(e._canvas,0,0,128,128),t.ports[0].postMessage(i.toDataURL())}};window.SCRIPT_8_EMBEDDED_GIST_ID?(this.isEmbed=!0,window.fetch("".concat("https://script-8-api-4l7lehio6.now.sh","/gist/").concat(window.SCRIPT_8_EMBEDDED_GIST_ID)).then(function(e){return e.json()}).then(function(_){e.gist=_,t({data:{type:"callCode",game:_utils_bios_js__WEBPACK_IMPORTED_MODULE_25__.a,isDoneFetching:!0,songs:Object(_gistParsers_songs_js__WEBPACK_IMPORTED_MODULE_39__.a)(_),chains:Object(_gistParsers_chains_js__WEBPACK_IMPORTED_MODULE_38__.a)(_),phrases:Object(_gistParsers_phrases_js__WEBPACK_IMPORTED_MODULE_37__.a)(_),sprites:Object(_gistParsers_sprites_js__WEBPACK_IMPORTED_MODULE_36__.a)(_),map:Object(_gistParsers_map_js__WEBPACK_IMPORTED_MODULE_35__.a)(_),run:!0,callbacks:{},sound:!0}})})):window.addEventListener("message",t),this.updateGlobals()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("touchstart",this.mousedownHandler),document.removeEventListener("mousedown",this.mousedownHandler),document.removeEventListener("touchend",this.mouseupHandler),document.removeEventListener("mouseup",this.mouseupHandler),document.removeEventListener("keydown",this.keydownHandler),document.removeEventListener("keyup",this.keyupHandler)}},{key:"evalCode",value:function evalCode(){var _this3=this,shadows=this.shadows,state=this.state,game=state.game,message=state.message,callbacks=state.callbacks,isDoneFetching=state.isDoneFetching;try{isDoneFetching&&(window._script8.end=lodash_once__WEBPACK_IMPORTED_MODULE_21___default()(function(){_this3.setState({game:Object(_gistParsers_game_js__WEBPACK_IMPORTED_MODULE_40__.a)(Object(_gistParsers_game_js__WEBPACK_IMPORTED_MODULE_40__.b)(_this3.gist)),started:!0}),"running"!==tone__WEBPACK_IMPORTED_MODULE_12__.context.state&&tone__WEBPACK_IMPORTED_MODULE_12__.start(),_this3.isEmbed||message.ports[0].postMessage({callback:callbacks.endCallback})})),this.previousInitString=window.init?window.init.toString():null;var shadowString="var ".concat(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__.a)(shadows).join(",")),innerSkeleton=_skeleton_js__WEBPACK_IMPORTED_MODULE_34__.a;eval("\n      // Shadow variables we don't want available.\n      ".concat(shadowString,"\n      // The inception eval allows the user to declare vars (e.g. screen).\n      eval(innerSkeleton)\n      eval(game)\n    ")),this.sendErrorToParent({type:"evalCode"})}catch(e){this.sendErrorToParent({type:"evalCode",error:e})}}},{key:"stopTimer",value:function(){this.timer&&this.timer.stop()}},{key:"startTimer",value:function(){var e=this;this.timer&&this.timer.stop(),this.previousElapsed=0,this.timer=Object(d3_timer__WEBPACK_IMPORTED_MODULE_13__.a)(function(t){try{var _,r=t-e.previousElapsed,n=Math.round(1e3/r);e.pastFpsValues.push(n),e.pastFpsValues.length>60&&(_=Math.round(lodash_sum__WEBPACK_IMPORTED_MODULE_16___default()(e.pastFpsValues)/e.pastFpsValues.length),e.pastFpsValues=[]),e.previousElapsed=t;var a=Object(_getUserInput_js__WEBPACK_IMPORTED_MODULE_32__.b)(e.keys);e.isEmbed?window.update(window._script8.embedState,a,r):e.store.dispatch({type:"UPDATE",input:a,elapsed:r}),e.drawUserGraphics(e.isEmbed?window._script8.embedState:e.store.getState()),void 0!==_&&_!==e.state.fps&&e.setState({fps:_}),e.sendErrorToParent({type:"startTimer"})}catch(s){e.sendErrorToParent({type:"startTimer",error:s})}},1e3/FPS)}},{key:"handleTimelineInput",value:function(e){this.setState({timelineIndex:+e.target.value})}},{key:"handleActorClick",value:function(e){var t=this.state.selectedActors,_=t.includes(e)?t.filter(function(t){return t!==e}):[].concat(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__.a)(t),[e]);this.setState({selectedActors:_})}},{key:"handleRestartClick",value:function(){window.init=Date.now(),window._script8.embedState="SCRIPT-8-RESTART",this.reduxHistory=[],this.pastFpsValues=[],this.forceUpdate()}},{key:"handlePauseClick",value:function(){this.state.isPaused?(this.reduxHistory=[],this.startTimer()):this.stopTimer(),this.setState({selectedActors:[],actors:[],fps:null,isPaused:!this.state.isPaused})}},{key:"componentDidUpdate",value:function(e,t){var _=this,r=this.state,n=r.message,a=r.isPaused,s=r.game,o=r.sprites,i=r.map,l=r.timelineIndex,c=r.actors,u=r.selectedActors,d=r.sound,h=r.songs,E=r.chains,p=r.phrases,f=r.run;try{if(deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(o,t.sprites)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(i,t.map)||this.updateGlobals(),deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(d,t.sound)||(tone__WEBPACK_IMPORTED_MODULE_12__.Master.mute=!d),deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(h,t.songs)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(E,t.chains)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(p,t.phrases)||(this.soundFunctions.makeSongs({songs:h,chains:E,phrases:p}),this.handleRestartClick()),this.volumeNode.mute=!f,a)if(deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(a,t.isPaused)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(s,t.game)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(o,t.sprites)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(i,t.map)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(l,t.timelineIndex)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(u,t.selectedActors)){var m=Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__.a)(this._ul.querySelectorAll("button")),b=Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__.a)(this._ul.querySelectorAll("canvas"));if(m.length!==b.length){var M=this._canvas.getContext("2d");c.forEach(function(e,t){_.useFrameBufferRenderer?_._pixelIntegers.fill(0):(M.save(),M.setTransform(1,0,0,1,0,0),M.clearRect(0,0,CANVAS_SIZE,CANVAS_SIZE)),window.drawActors({actors:[Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__.a)({},e,{x:64,y:64})]}),_.useFrameBufferRenderer&&_.writePixelDataToCanvas();var r=Object(_contextCanvasAPI_trimCanvas_js__WEBPACK_IMPORTED_MODULE_30__.a)({ctx:_._canvas.getContext("2d"),width:CANVAS_SIZE,height:CANVAS_SIZE});m[t].appendChild(r)}),this.drawUserGraphics(this.store.getState()),this.useFrameBufferRenderer||M.restore()}}else try{if(this.reduxHistory.length){this.evalCode();var O=[];this.store=Object(redux__WEBPACK_IMPORTED_MODULE_14__.b)(this.reducer,this.reduxHistory[0].state),O.push(this.store.getState()),this.reduxHistory.forEach(function(e,t){e.state;var r=e.action;t===l-1?_.updateGlobals({log:_.sendLogToParent}):_.updateGlobals({log:NOOP}),_.store.dispatch(r),O.push(_.store.getState())}),this.updateGlobals({log:this.sendLogToParent}),O=O.filter(function(e){return!lodash_isEmpty__WEBPACK_IMPORTED_MODULE_23___default()(e)});var D=t.isPaused?l:O.length-1,P=O[D];this.drawUserGraphics(P);var g=lodash_flatten__WEBPACK_IMPORTED_MODULE_18___default()(O.map(function(e){return e.actors})).filter(function(e){return e}),v=lodash_uniqBy__WEBPACK_IMPORTED_MODULE_22___default()(g,function(e){return e.id});O.forEach(function(e,t){if(t!==D&&t%ACTOR_FRAME_SKIP===0||t===O.length-1){var r=e.actors&&e.actors.filter(function(e){return u.includes(e.id)})||[];_.updateGlobals({log:NOOP}),window.drawActors&&window.drawActors({actors:r},!0),_.updateGlobals({log:_.sendLogToParent})}});var A=O[D];window.drawActors&&A&&A.actors&&window.drawActors({actors:A.actors.filter(function(e){return u.includes(e.id)})}),this.useFrameBufferRenderer&&this.writePixelDataToCanvas(),this.store=Object(redux__WEBPACK_IMPORTED_MODULE_14__.b)(this.reducer,P),this.setState({alteredStates:O,actors:v,timelineIndex:D})}this.sendErrorToParent({type:"isPaused"})}catch(T){this.sendErrorToParent({type:"isPaused",error:T})}else if(this.isEmbed)s===t.game&&"SCRIPT-8-RESTART"!==window._script8.embedState||(this.evalCode(),window._script8.embedState={},window.init(window._script8.embedState));else if(t.isPaused||s!==t.game||f!==t.run||!deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(window.init?window.init.toString():null,this.previousInitString))if(this.evalCode(),deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(window.init?window.init.toString():null,this.previousInitString)){var w=this.store&&this.store.getState()||{};this.store=Object(redux__WEBPACK_IMPORTED_MODULE_14__.b)(this.reducer,w,Object(redux__WEBPACK_IMPORTED_MODULE_14__.a)(this.reduxLogger))}else this.store=Object(redux__WEBPACK_IMPORTED_MODULE_14__.b)(this.reducer,{},Object(redux__WEBPACK_IMPORTED_MODULE_14__.a)(this.reduxLogger)),this.store.dispatch({type:"INIT"}),this.reduxHistory=[];this.sendErrorToParent({type:"componentDidMount"})}catch(T){this.sendErrorToParent({type:"componentDidMount",error:T})}if(this.timer||a||this.startTimer(),n){var I=document.body.querySelector(".container").scrollHeight;I===this.heightSent||this.isEmbed||(n.ports[0].postMessage({height:I}),this.heightSent=I)}}},{key:"render",value:function(){var e=this,t=this.state,_=t.isPaused,r=t.actors,n=t.alteredStates,a=t.timelineIndex,s=t.selectedActors,o=t.fps,i=t.run,l=t.started;return react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{className:"Iframe"},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{className:"container"},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("canvas",{className:"master",width:CANVAS_SIZE,height:CANVAS_SIZE,ref:function(t){e._canvas=t}}),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_10___default()("mobile-buttons",{hide:!i})},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setArrowLeftRef,className:"button left",onTouchStart:this.touchstartArrowLeft,onTouchEnd:this.touchendArrowLeft},"<"),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setArrowUpRef,className:"button up",onTouchStart:this.touchstartArrowUp,onTouchEnd:this.touchendArrowUp},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("span",null,">")),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setArrowRightRef,className:"button right",onTouchStart:this.touchstartArrowRight,onTouchEnd:this.touchendArrowRight},">"),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setaRef,className:"button a",onTouchStart:this.touchstarta,onTouchEnd:this.touchenda},"A"),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setbRef,className:"button b",onTouchStart:this.touchstartb,onTouchEnd:this.touchendb},"B"),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setArrowDownRef,className:"button down",onTouchStart:this.touchstartArrowDown,onTouchEnd:this.touchendArrowDown},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("span",null,"<")),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setSpaceRef,className:"button select",onTouchStart:this.touchstartSpace,onTouchEnd:this.touchendSpace},"Select"),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setEnterRef,className:"button start",onTouchStart:this.touchstartEnter,onTouchEnd:this.touchendEnter},"Start")),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_10___default()("stats",{invisible:i&&!l})},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("button",{className:"button play",onClick:this.handlePauseClick},_?"play":"pause"),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("button",{className:classnames__WEBPACK_IMPORTED_MODULE_10___default()("button play",{hide:_}),onClick:this.handleRestartClick},"restart"),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_10___default()("fps",{hide:_||!0})},"fps (avg): ",react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("span",null,o))),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_10___default()("timeline",{hide:i||0===n.length,invisible:!_})},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("input",{type:"range",value:a,min:0,max:n.length-1,onChange:this.handleTimelineInput}),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("ul",{ref:function(t){e._ul=t}},r.map(function(t,_){return react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("li",{key:t.id,className:classnames__WEBPACK_IMPORTED_MODULE_10___default()({hide:_>6})},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("button",{className:classnames__WEBPACK_IMPORTED_MODULE_10___default()({active:s.includes(t.id)}),onClick:function(){return e.handleActorClick(t.id)}}))})))))}}]),Iframe}(react__WEBPACK_IMPORTED_MODULE_9__.Component);__webpack_exports__.a=Iframe},85:function(e,t,_){"use strict";var r=_(13),n=_(31),a="\n\nconst modes = ['glitch', 'numbers', 'pre-ram', 'ram', 'run', 'end']\n\nconst size = range(128)\nconst d = 1\n\nconst rects = flatten(size.map(x => size.map(y => [x, y, d, 128])))\n\nconst biosLines = range(18).map(() => {\n  return (\n    '  ' +\n    range(4)\n      .map(() => random(1000, 9999))\n      .join('      ')\n  )\n})\n\ninit = state => {\n  state.counter = 0\n  state.totalElapsed = 0\n  state.modeIndex = 0\n}\n\nupdate = (state, input, elapsed) => {\n  const mode = modes[state.modeIndex]\n\n  state.counter++\n  state.totalElapsed += elapsed\n\n  if (mode === 'glitch' && state.totalElapsed > 500) {\n    state.modeIndex++\n    state.totalElapsed = 0\n  } else if (mode === 'numbers' && state.totalElapsed > 100) {\n    state.modeIndex++\n    state.totalElapsed = 0\n  } else if (mode === 'pre-ram' && state.totalElapsed > 100) {\n    state.modeIndex++\n    state.totalElapsed = 0\n    state.counter = 0\n  } else if (mode === 'ram' && state.counter > 64 && _script8.end) {\n    // The _script8.end function is not defined until we're done fetching the gist.\n    state.modeIndex++\n    state.totalElapsed = 0\n    state.counter++\n  } else if (mode === 'run') {\n    if (input.__mousedown) {\n      ".concat(n.a,"\n      _script8.end()\n    }\n  }\n}\n\ndraw = state => {\n  const { modeIndex, counter } = state\n  const mode = modes[modeIndex]\n\n  if (mode === 'glitch') {\n    rects.forEach(rect => {\n      rectFill(...rect, rect[0] + (rect[1] * counter) / 100)\n    })\n  }\n\n  if (mode === 'numbers') {\n    const factor = 4\n    if (counter % factor === 0) {\n      rectFill(0, 0, 128, 128, 7)\n      biosLines.forEach((line, j) => {\n        print(0, 128 + 7 * j - (7 * counter) / factor, line, 5)\n      })\n    }\n  }\n\n  if (mode === 'pre-ram') {\n    rectFill(0, 0, 128, 128, 7)\n  }\n\n  if (mode === 'ram') {\n    rectFill(0, 0, 128, 128, 6)\n    print(7, 7 * 1, 'script-8', 0)\n    print(7, 7 * 3, 'bios (c) 1980 pantron inc.', 3)\n    print(7, 7 * 4, 'version ").concat(r.a,"', 3)\n    print(7, 7 * 6, 'RAM: ' + Math.min(state.counter, 32) + ' kb', 3)\n\n    print(\n      7,\n      7 * 9,\n      'booting cassette ' +\n        (Math.floor(state.counter / 20) % 2 === 0 ? '' : '+'),\n      3\n    )\n\n    rectFill(48 + 3 * 0, 7, 3, 5, 0)\n    rectFill(48 + 3 * 1, 7, 3, 5, 1)\n    rectFill(48 + 3 * 2, 7, 3, 5, 2)\n    rectFill(48 + 3 * 3, 7, 3, 5, 3)\n    rectFill(48 + 3 * 4, 7, 3, 5, 4)\n    rectFill(48 + 3 * 5, 7, 3, 5, 5)\n    rectFill(48 + 3 * 6, 7, 3, 5, 4)\n    rectFill(48 + 3 * 7, 7, 3, 5, 3)\n    rectFill(48 + 3 * 8, 7, 3, 5, 2)\n    rectFill(48 + 3 * 9, 7, 3, 5, 1)\n    rectFill(48 + 3 * 10, 7, 3, 5, 0)\n  }\n\n  if (mode === 'run') {\n    rectFill(0, 0, 128, 128, 6)\n    print(7, 7 * 1, 'script-8', 0)\n    print(7, 7 * 3, 'bios (c) 1980 pantron inc.', 3)\n    print(7, 7 * 4, 'version ").concat(r.a,"', 3)\n    print(7, 7 * 6, 'RAM: ' + Math.min(state.counter, 32) + ' kb', 3)\n\n    print(7, 7 * 9, 'booting cassette done. ', 3)\n\n    rectFill(48 + 3 * 0, 7, 3, 5, 0)\n    rectFill(48 + 3 * 1, 7, 3, 5, 1)\n    rectFill(48 + 3 * 2, 7, 3, 5, 2)\n    rectFill(48 + 3 * 3, 7, 3, 5, 3)\n    rectFill(48 + 3 * 4, 7, 3, 5, 4)\n    rectFill(48 + 3 * 5, 7, 3, 5, 5)\n    rectFill(48 + 3 * 6, 7, 3, 5, 4)\n    rectFill(48 + 3 * 7, 7, 3, 5, 3)\n    rectFill(48 + 3 * 8, 7, 3, 5, 2)\n    rectFill(48 + 3 * 9, 7, 3, 5, 1)\n    rectFill(48 + 3 * 10, 7, 3, 5, 0)\n    print(7, 7 * 11, '> click to run', 3)\n    rectFill(7, 7 * 12, 4, 5, Math.floor(state.counter / 25) % 2 ? 0 : 6)\n  }\n}\n\n");t.a=a},87:function(e,t,_){"use strict";t.a=function(e){var t,_,r,n=e.ctx,a=e.width,s=e.height,o=n.getImageData(0,0,a,s),i=o.data.length,l={top:null,left:null,right:null,bottom:null};for(t=0;t<i;t+=4)0!==o.data[t+3]&&(_=t/4%a,r=~~(t/4/a),null===l.top&&(l.top=r),null===l.left?l.left=_:_<l.left&&(l.left=_),null===l.right?l.right=_:l.right<_&&(l.right=_),null===l.bottom?l.bottom=r:l.bottom<r&&(l.bottom=r));l.bottom+=1,l.right+=1;var c=document.createElement("canvas"),u=c.getContext("2d"),d=l.bottom-l.top,h=l.right-l.left,E=Math.max(h,d),p=n.getImageData(l.left,l.top,h,d);return u.canvas.width=E,u.canvas.height=E,u.putImageData(p,0,0),c}},88:function(e,t,_){"use strict";t.a=function(e){var t,_=e.token,r=e.blacklist,n=e.globals,a=e.shadows;return r.has(_)?t=!1:n.has(_)?t=!0:window.hasOwnProperty(_)?(a.add(_),t=!0):t=!0,t}},89:function(e,t,_){"use strict";t.a=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0;switch(_.type){case"INIT":var r;try{if(r=JSON.parse(JSON.stringify(t)),window.init(r),r.actors&&r.actors.filter(function(e){return!e.id}).length)throw new Error("Actors must have an id property.");e({type:"reducerError"})}catch(a){r=t,e({type:"reducerError",error:a})}finally{return r}case"UPDATE":var n;try{if(n=JSON.parse(JSON.stringify(t)),window.update(n,_.input,_.elapsed),n.actors&&n.actors.filter(function(e){return!e.id}).length)throw new Error("Actors must have an id property.");e({type:"reducerError"})}catch(a){n=t,e({type:"reducerError",error:a})}finally{return n}default:return t}}}},9:function(e,t,_){"use strict";var r={BOOT:"BOOT",HOME:"HOME",RUN:"RUN",HELP:"HELP",CODE:"CODE",SPRITE:"SPRITE",MAP:"MAP",SONG:"SONG",CHAIN:"CHAIN",PHRASE:"PHRASE",SHELF:"SHELF"},n=r,a={iframeVersion:_(13).a,errorLine:null,screen:n.BOOT,booted:!1,gist:{},game:{0:{text:"",active:!0,key:0}},token:{},nextAction:null,sprites:{},map:[],phrases:{},chains:{},songs:{},docHistories:{},dismissedNotices:[],selectedUi:{phrase:0,chain:0,song:0},tutorial:null,sound:!0,shelving:!1};t.a=a},90:function(e,t,_){"use strict";_.d(t,"a",function(){return s});var r=_(0),n=_.n(r),a=_(9),s=function(e){return JSON.parse(n.a.get(e,'files["map.json"].content',JSON.stringify(a.a.map,null,2)))}},91:function(e,t,_){"use strict";_.d(t,"a",function(){return s});var r=_(0),n=_.n(r),a=_(9),s=function(e){return JSON.parse(n.a.get(e,'files["sprites.json"].content',JSON.stringify(a.a.sprites,null,2)))}},92:function(e,t,_){"use strict";_.d(t,"a",function(){return l});var r=_(0),n=_.n(r),a=_(93),s=_.n(a),o=_(9),i=_(22),l=function(e){return t=JSON.parse(n.a.get(e,'files["phrases.json"].content',JSON.stringify(o.a.phrases,null,2))),s()(n.a.mapValues(t,function(e){var t=Array.isArray(e),_=n()(t?e:e.notes).map(function(e){return e.match(/^(\d+)(.*)(\d)(\d)/).slice(1,5)}).map(function(e){return{index:e[0],note:Object(i.b)(e[1]),octave:+e[2],volume:+e[3]}}).keyBy("index").mapValues(function(e){return n.a.omit(e,"index")}).value();return n.a.isEmpty(_)?null:{notes:_,tempo:t?0:n.a.isNil(e.tempo)?0:e.tempo}}));var t}},94:function(e,t,_){"use strict";_.d(t,"a",function(){return s});var r=_(0),n=_.n(r),a=_(9),s=function(e){return JSON.parse(n.a.get(e,'files["chains.json"].content',JSON.stringify(a.a.chains,null,2)))}},95:function(e,t,_){"use strict";_.d(t,"a",function(){return s});var r=_(0),n=_.n(r),a=_(9),s=function(e){return JSON.parse(n.a.get(e,'files["songs.json"].content',JSON.stringify(a.a.songs,null,2)))}},96:function(e,t,_){"use strict";_.d(t,"a",function(){return s});var r=_(97),n=Object(r.detect)(),a={chrome:/\(eval at <anonymous> \(eval at evalCode \(.+:\d+\)\), <anonymous>:(\d+):(\d+)\)/,firefox:/line \d+ > eval line \d+ > eval:(\d+):(\d+)/,edge:/\(eval code:(\d+):(\d+)\)/};function s(e){var t=a[n.name];if(t&&e.stack){var _=t.exec(e.stack);if(_)return{line:_[1],column:_[2]}}else if("safari"===n.name)return{line:e.line,column:e.column}}},98:function(e,t,_){"use strict";var r=_(0),n=_(3),a=function(e){var t=e.x1,_=e.y1,r=e.x2,n=e.y2,a=e.setPixel,s=e.color,o=!1;if(Math.abs(t-r)<Math.abs(_-n)){var i=[_,t];t=i[0],_=i[1];var l=[n,r];r=l[0],n=l[1],o=!0}if(t>r){var c=[r,t];t=c[0],r=c[1];var u=[n,_];_=u[0],n=u[1]}for(var d=r-t,h=n-_,E=2*Math.abs(h),p=0,f=_,m=t;m<=r;m++)o?a(f,m,s):a(m,f,s),(p+=E)>d&&(n>_?f++:f--,p-=2*d)},s=_(4),o=function(e){var t=e.points,_=e.args,r=e.line;if(t.length){var n,a,o,i,l,c;switch(_.length){case 1:a=t.map(function(e){return Object(s.a)(e)}),n=_[0];break;case 2:o=Math.cos(_[0]/180*Math.PI),i=Math.sin(_[0]/180*Math.PI);var u=t.map(function(e){return e[0]}),d=t.map(function(e){return e[1]});l=(Math.min.apply(Math,u)+Math.max.apply(Math,u))/2,c=(Math.min.apply(Math,d)+Math.max.apply(Math,d))/2,a=t.map(function(e){return[(e[0]-l)*o-(e[1]-c)*i+l,(e[0]-l)*i+(e[1]-c)*o+c]}),n=_[1];break;case 3:throw Error("`polyStroke` found 3 arguments instead of 2, 3, or 5.");default:o=Math.cos(_[0]/180*Math.PI),i=Math.sin(_[0]/180*Math.PI),l=_[1],c=_[2],n=_[3],a=t.map(function(e){return[(e[0]-l)*o-(e[1]-c)*i+l,(e[0]-l)*i+(e[1]-c)*o+c]})}for(var h=1;h<t.length;h++)r(Math.round(a[h-1][0]),Math.round(a[h-1][1]),Math.round(a[h][0]),Math.round(a[h][1]),n);r(Math.round(a[a.length-1][0]),Math.round(a[a.length-1][1]),Math.round(a[0][0]),Math.round(a[0][1]),n)}},i=function(e){var t=e.cx,_=e.cy,r=e.radius,n=e.color,a=e.onlyStroke,s=e.setPixel,o=e.line,i=r-1,l=0,c=1,u=1,d=c-(r<<1),h=function(e,r){a?(s(t+e,_+r,n),s(t+e,_-r,n)):o(t+e,_+r,t+e,_-r,n)};if(2===r)h(-1,0),h(0,1),h(1,0);else if(3===r)h(-2,0),h(-2,1),h(-1,2),h(-0,2),h(1,2),h(2,1),h(2,0);else for(;i>=l;)h(i,l),h(-i,l),h(l,i),h(-l,i),d<=0&&(l++,d+=u,u+=2),d>0&&(i--,d+=(c+=2)-(r<<1))},l=_(16),c=_.n(l),u=function(e){var t=e.x,_=e.y,r=e.spriteIndex,n=e.darken,a=e.flipH,s=e.flipV,o=e.setPixel,i=e.sprites;i[r]&&i[r].slice(0,8).forEach(function(e,r){e.split("").forEach(function(e,i){if(" "!==e){var l=c()(+e-n,0,7);o(Math.floor(t)+(a?7-i:i),Math.floor(_)+(s?7-r:r),l)}})})},d={"<":[0,0,1,0,1,0,1,0,0,0,1,0,0,0,1,0,0,0],">":[1,0,0,0,1,0,0,0,1,0,1,0,1,0,0,0,0,0],"/":[0,0,0,0,0,1,0,1,0,0,1,0,1,0,0,0,0,0],":":[0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],"|":[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0],"(":[0,1,1,0,1,0,1,0,0,1,0,0],")":[1,0,0,1,0,1,0,1,1,0,0,0],0:[0,1,1,1,0,1,1,0,1,1,0,1,1,1,1,0,0,0],1:[1,1,0,0,1,0,0,1,0,0,1,0,1,1,1,0,0,0],2:[1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,0,0,0],3:[1,1,1,0,0,1,0,1,1,0,0,1,1,1,1,0,0,0],4:[1,0,1,1,0,1,1,1,1,0,0,1,0,0,1,0,0,0],5:[1,1,1,1,0,0,1,1,1,0,0,1,1,1,1,0,0,0],6:[1,0,0,1,0,0,1,1,1,1,0,1,1,1,1,0,0,0],7:[1,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0],8:[1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,0,0,0],9:[1,1,1,1,0,1,1,1,1,0,0,1,0,0,1,0,0,0]," ":[0,0,0,0,0,0,0,0,0,0,0,0],".":[0,0,0,0,1,0],",":[0,0,0,0,1,1],"+":[0,0,0,0,1,0,1,1,1,0,1,0,0,0,0,0,0,0],"-":[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0],"!":[1,1,1,0,1,0],"?":[1,1,0,1,1,1,0,0,1,0,0,0],a:[1,1,1,1,0,1,1,1,1,1,0,1,1,0,1,0,0,0],b:[1,1,0,1,0,1,1,1,0,1,0,1,1,1,1,0,0,0],c:[1,1,1,1,0,0,1,0,0,1,0,0,1,1,1,0,0,0],d:[1,1,0,1,0,1,1,0,1,1,0,1,1,1,1,0,0,0],e:[1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,0,0,0],f:[1,1,1,1,0,0,1,1,1,1,0,0,1,0,0,0,0,0],g:[1,1,1,1,0,0,1,0,1,1,0,1,1,1,1,0,0,0],h:[1,0,1,1,0,1,1,1,1,1,0,1,1,0,1,0,0,0],i:[1,1,1,0,1,0,0,1,0,0,1,0,1,1,1,0,0,0],j:[0,0,1,0,0,1,0,0,1,1,0,1,1,1,1,0,0,0],k:[1,0,1,1,0,1,1,1,0,1,0,1,1,0,1,0,0,0],l:[1,0,0,1,0,0,1,0,0,1,0,0,1,1,1,0,0,0],m:[1,0,1,1,1,1,1,1,1,1,0,1,1,0,1,0,0,0],n:[1,1,1,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0],o:[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1,0,0,0],p:[1,1,1,1,0,1,1,1,1,1,0,0,1,0,0,0,0,0],q:[1,1,1,1,0,1,1,0,1,1,0,1,0,1,1,0,0,0],r:[1,1,1,1,0,1,1,1,0,1,0,1,1,0,1,0,0,0],s:[1,1,1,1,0,0,1,1,1,0,0,1,1,1,1,0,0,0],t:[1,1,1,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0],u:[1,0,1,1,0,1,1,0,1,1,0,1,1,1,1,0,0,0],v:[1,0,1,1,0,1,1,0,1,1,0,1,1,1,0,0,0,0],w:[1,0,1,1,0,1,1,1,1,1,1,1,1,0,1,0,0,0],x:[1,0,1,1,0,1,0,1,0,1,0,1,1,0,1,0,0,0],y:[1,0,1,1,0,1,1,1,1,0,0,1,1,1,1,0,0,0],z:[1,1,1,0,0,1,0,1,0,1,0,0,1,1,1,0,0,0]},h=function(e){var t=e.x,_=e.y,r=e.letters,n=e.c,a=e.setPixel,s=Math.floor(t),o=Math.floor(_),i=!0,l=!1,c=void 0;try{for(var u,h=r.toString().split("")[Symbol.iterator]();!(i=(u=h.next()).done);i=!0){var E=u.value,p=d[E.toLowerCase()];if(p){for(var f=p.length/6,m=0;m<f;m++)for(var b=0;b<6;b++)p[b*f+m]&&a(s+m,o+b,n);s+=f+1}else s+=3}}catch(M){l=!0,c=M}finally{try{i||null==h.return||h.return()}finally{if(l)throw c}}};t.a=function(e){var t=e.pixels,_=e.width,s=e.height,l=e.sprites,c=e.map,d=void 0===c?[]:c,E=JSON.parse(JSON.stringify(d)),p=0,f=0,m=function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e=Math.floor(e-p),r=Math.floor(r-f),!(e<0||e>=_||r<0||r>=s)){var o=n.a.int(a);o&&(t[r*_+e]=o)}},b=function(e,t,_,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;a({x1:e,y1:t,x2:_,y2:r,setPixel:m,color:n})},M=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];e-p<-8||e-p>_||t-f<-8||t-f>s||u({x:e,y:t,spriteIndex:r,darken:n,flipH:a,flipV:o,setPixel:m,sprites:l})};return{camera:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;p=Math.floor(e),f=Math.floor(t)},clear:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;t.fill(n.a.int(e))},setPixel:m,getPixel:function(e,r){return e=Math.floor(e-p),r=Math.floor(r-f),e<0||e>=_||r<0||r>=s?7:n.a.lookupInt(t[r*s+e])},line:b,polyStroke:function(e){for(var t=arguments.length,_=new Array(t>1?t-1:0),r=1;r<t;r++)_[r-1]=arguments[r];o({points:e,args:_,line:b})},rectStroke:function(e,t,_,r){!function(e){var t=e.x,_=e.y,r=e.w,n=e.h,a=e.c,s=e.line,o=Math.floor(t),i=Math.floor(t+r-1),l=Math.floor(_),c=Math.floor(_+n-1);s(o,l,i,l,a),s(o,c,i,c,a),s(o,l,o,c,a),s(i,l,i,c,a)}({x:e,y:t,w:_,h:r,c:arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,line:b})},rectFill:function(e,t,_,r){!function(e){for(var t=e.x,_=e.y,r=e.w,n=e.h,a=e.c,s=e.line,o=Math.floor(t),i=Math.floor(t+r-1),l=Math.floor(_),c=Math.floor(_+n-1),u=o;u<=i;u++)s(u,l,u,c,a)}({x:e,y:t,w:_,h:r,c:arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,line:b})},circStroke:function(e,t,_){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i({cx:Math.floor(e),cy:Math.floor(t),radius:Math.floor(_),color:r,onlyStroke:!0,setPixel:m,line:b})},circFill:function(e,t,_){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i({cx:Math.floor(e),cy:Math.floor(t),radius:Math.floor(_),color:r,setPixel:m,line:b})},print:function(e,t,_){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;h({x:e,y:t,letters:_,c:r,setPixel:m})},sprite:M,getTile:function(e,t){var _=Object(r.get)(E,[t,e],null),n=null!==_?l[_]:null;return n&&(n.type=n[8]||0,n.number=_),n},setTile:function(e,t,_){E[t][e]=_},map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;arguments.length>1&&void 0!==arguments[1]&&arguments[1],E.forEach(function(t,_){t.forEach(function(t,r){null!==t&&M(8*(r+e),8*_,t)})})},resetMap:function(){E=JSON.parse(JSON.stringify(d))}}}},99:function(e,t,_){"use strict";var r=_(11),n=_(0),a=_(3),s=function(e){var t=e.cx,_=e.cy,r=e.radius,n=e.ctx,a=e.color,s=e.onlyStroke,o=r-1,i=0,l=1,c=1,u=l-(r<<1);n.fillStyle=a,n.strokeStyle=a;var d=function(e,t){n.fillRect(e,t,1,1)},h=function(e){var t=e.x0,_=e.x1,r=e.y;n.beginPath(),n.moveTo(t+1,r+.5),n.lineTo(_,r+.5),n.stroke()};if(2===r)d(t+1,_),d(t-1,_),d(t,_+1),d(t,_-1),s||d(t,_);else if(3===r)h({x0:t-2,x1:t+2,y:_-2}),h({x0:t-2,x1:t+2,y:_+2}),s?(d(t+2,_-1),d(t+2,_),d(t+2,_+1),d(t-2,_-1),d(t-2,_),d(t-2,_+1)):(h({x0:t-3,x1:t+3,y:_-1}),h({x0:t-3,x1:t+3,y:_}),h({x0:t-3,x1:t+3,y:_+1}));else for(;o>=i;)s?(d(t+o,_+i),d(t-o,_+i),d(t+i,_+o),d(t-i,_+o),d(t+o,_-i),d(t-o,_-i),d(t+i,_-o),d(t-i,_-o)):(h({x0:t+i,x1:t-i,y:_-o}),h({x0:t+o,x1:t-o,y:_-i}),h({x0:t+o,x1:t-o,y:_+i}),h({x0:t+i,x1:t-i,y:_+o})),u<=0&&(i++,u+=c,c+=2),u>0&&(o--,u+=(l+=2)-(r<<1))},o=function(e){var t=e.x1,_=e.y1,r=e.x2,n=e.y2,a=e.ctx,s=e.color;a.fillStyle=s;var o=!1;if(Math.abs(t-r)<Math.abs(_-n)){var i=[_,t];t=i[0],_=i[1];var l=[n,r];r=l[0],n=l[1],o=!0}if(t>r){var c=[r,t];t=c[0],r=c[1];var u=[n,_];_=u[0],n=u[1]}for(var d=r-t,h=n-_,E=2*Math.abs(h),p=0,f=_,m=t;m<=r;m++)o?a.fillRect(f,m,1,1):a.fillRect(m,f,1,1),(p+=E)>d&&(n>_?f++:f--,p-=2*d)},i=_(4),l=function(e){var t=e.points,_=e.args,r=e.ctx;if(t.length){var n,s,l,c,u,d;switch(_.length){case 1:s=t.map(function(e){return Object(i.a)(e)}),n=_[0];break;case 2:l=Math.cos(_[0]/180*Math.PI),c=Math.sin(_[0]/180*Math.PI);var h=t.map(function(e){return e[0]}),E=t.map(function(e){return e[1]});u=(Math.min.apply(Math,h)+Math.max.apply(Math,h))/2,d=(Math.min.apply(Math,E)+Math.max.apply(Math,E))/2,s=t.map(function(e){return[(e[0]-u)*l-(e[1]-d)*c+u,(e[0]-u)*c+(e[1]-d)*l+d]}),n=_[1];break;case 3:throw Error("`polyStroke` found 3 arguments instead of 2, 3, or 5.");default:l=Math.cos(_[0]/180*Math.PI),c=Math.sin(_[0]/180*Math.PI),u=_[1],d=_[2],n=_[3],s=t.map(function(e){return[(e[0]-u)*l-(e[1]-d)*c+u,(e[0]-u)*c+(e[1]-d)*l+d]})}for(var p=1;p<t.length;p++)o({x1:Math.round(s[p-1][0]),y1:Math.round(s[p-1][1]),x2:Math.round(s[p][0]),y2:Math.round(s[p][1]),ctx:r,color:a.a.rgb(n)});o({x1:Math.round(s[s.length-1][0]),y1:Math.round(s[s.length-1][1]),x2:Math.round(s[0][0]),y2:Math.round(s[0][1]),ctx:r,color:a.a.rgb(n)})}},c=_(7),u={"<":[0,0,1,0,1,0,1,0,0,0,1,0,0,0,1,0,0,0],">":[1,0,0,0,1,0,0,0,1,0,1,0,1,0,0,0,0,0],"/":[0,0,0,0,0,1,0,1,0,0,1,0,1,0,0,0,0,0],":":[0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],"|":[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0],"(":[0,1,1,0,1,0,1,0,0,1,0,0],")":[1,0,0,1,0,1,0,1,1,0,0,0],0:[0,1,1,1,0,1,1,0,1,1,0,1,1,1,1,0,0,0],1:[1,1,0,0,1,0,0,1,0,0,1,0,1,1,1,0,0,0],2:[1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,0,0,0],3:[1,1,1,0,0,1,0,1,1,0,0,1,1,1,1,0,0,0],4:[1,0,1,1,0,1,1,1,1,0,0,1,0,0,1,0,0,0],5:[1,1,1,1,0,0,1,1,1,0,0,1,1,1,1,0,0,0],6:[1,0,0,1,0,0,1,1,1,1,0,1,1,1,1,0,0,0],7:[1,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0],8:[1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,0,0,0],9:[1,1,1,1,0,1,1,1,1,0,0,1,0,0,1,0,0,0]," ":[0,0,0,0,0,0,0,0,0,0,0,0],".":[0,0,0,0,1,0],",":[0,0,0,0,1,1],"+":[0,0,0,0,1,0,1,1,1,0,1,0,0,0,0,0,0,0],"-":[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0],"!":[1,1,1,0,1,0],"?":[1,1,0,1,1,1,0,0,1,0,0,0],a:[1,1,1,1,0,1,1,1,1,1,0,1,1,0,1,0,0,0],b:[1,1,0,1,0,1,1,1,0,1,0,1,1,1,1,0,0,0],c:[1,1,1,1,0,0,1,0,0,1,0,0,1,1,1,0,0,0],d:[1,1,0,1,0,1,1,0,1,1,0,1,1,1,1,0,0,0],e:[1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,0,0,0],f:[1,1,1,1,0,0,1,1,1,1,0,0,1,0,0,0,0,0],g:[1,1,1,1,0,0,1,0,1,1,0,1,1,1,1,0,0,0],h:[1,0,1,1,0,1,1,1,1,1,0,1,1,0,1,0,0,0],i:[1,1,1,0,1,0,0,1,0,0,1,0,1,1,1,0,0,0],j:[0,0,1,0,0,1,0,0,1,1,0,1,1,1,1,0,0,0],k:[1,0,1,1,0,1,1,1,0,1,0,1,1,0,1,0,0,0],l:[1,0,0,1,0,0,1,0,0,1,0,0,1,1,1,0,0,0],m:[1,0,1,1,1,1,1,1,1,1,0,1,1,0,1,0,0,0],n:[1,1,1,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0],o:[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1,0,0,0],p:[1,1,1,1,0,1,1,1,1,1,0,0,1,0,0,0,0,0],q:[1,1,1,1,0,1,1,0,1,1,0,1,0,1,1,0,0,0],r:[1,1,1,1,0,1,1,1,0,1,0,1,1,0,1,0,0,0],s:[1,1,1,1,0,0,1,1,1,0,0,1,1,1,1,0,0,0],t:[1,1,1,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0],u:[1,0,1,1,0,1,1,0,1,1,0,1,1,1,1,0,0,0],v:[1,0,1,1,0,1,1,0,1,1,0,1,1,1,0,0,0,0],w:[1,0,1,1,0,1,1,1,1,1,1,1,1,0,1,0,0,0],x:[1,0,1,1,0,1,0,1,0,1,0,1,1,0,1,0,0,0],y:[1,0,1,1,0,1,1,1,1,0,0,1,1,1,1,0,0,0],z:[1,1,1,0,0,1,0,1,0,1,0,0,1,1,1,0,0,0]},d=function(e){var t=e.x,_=e.y,r=e.letters,n=e.c,s=e.ctx,o=a.a.triplet(n);r.toString().split("").map(function(e){var t=u[e.toLowerCase()];return{width:t?t.length/6:3,letter:e,pixels:t}}).reduce(function(e,t,_){var r=e[_-1],n=r?r.width+1+r.xOffset:0,a=r?r.yOffset:0;return[].concat(Object(i.a)(e),[Object(c.a)({},t,{xOffset:n,yOffset:a})])},[]).filter(function(e){return e.pixels}).forEach(function(e){var r=e.pixels,n=e.xOffset,a=e.yOffset,i=e.width,l=s.getImageData(t+n,_+a,i,6),c=l.data;r.map(function(e,t){return{pixel:e,pixelIndex:t}}).filter(function(e){return e.pixel}).forEach(function(e){var t=4*e.pixelIndex;c[t+0]=o[0],c[t+1]=o[1],c[t+2]=o[2],c[t+3]=255}),s.putImageData(l,t+n,_+a)})},h=_(16),E=_.n(h),p=function(e){var t=e.x,_=e.y,r=e.spriteIndex,n=e.darken,s=void 0===n?0:n,o=e.flipH,i=void 0!==o&&o,l=e.flipV,c=void 0!==l&&l,u=e.sprites,d=e.ctx;u[r]&&u[r].slice(0,8).forEach(function(e,r){e.split("").forEach(function(e,n){if(" "!==e){var o=E()(+e-s,0,7);d.fillStyle=a.a.rgb(o),d.fillRect(Math.floor(t)+(i?7-n:n),Math.floor(_)+(c?7-r:r),1,1)}})})};t.a=function(e){var t=e.ctx,_=e.width,i=e.height,c=e.sprites,u=e.map,h=void 0===u?[]:u,E=JSON.parse(JSON.stringify(h));t.setTransform(1,0,0,1,0,0);var f=0,m=0,b=document.createElement("canvas");b.width=_,b.height=i;var M=b.getContext("2d");return Object.entries(c).forEach(function(e){var t=Object(r.a)(e,2),_=t[0],n=t[1],s=+_;!function(e){var t=e.x,_=e.y,r=e.grid,n=e.ctx;r.slice(0,8).forEach(function(e,r){e.split("").forEach(function(e,s){" "!==e&&(n.fillStyle=a.a.rgb(+e),n.fillRect(Math.floor(t)+s,Math.floor(_)+r,1,1))})})}({x:s%16*8,y:8*Math.floor(s/16),grid:n,ctx:M})}),{polyStroke:function(e){for(var _=arguments.length,r=new Array(_>1?_-1:0),n=1;n<_;n++)r[n-1]=arguments[n];l({points:e,args:r,ctx:t})},getTile:function(e,t){var _=Object(n.get)(E,[t,e],null),r=null!==_?c[_]:null;return r&&(r.type=r[8]||0,r.number=_),r},setTile:function(e,t,_){E[t][e]=_},line:function(e,_,r,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;o({x1:Math.floor(e),y1:Math.floor(_),x2:Math.floor(r),y2:Math.floor(n),ctx:t,color:a.a.rgb(s)})},print:function(e,_,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;d({x:e-f,y:_-m,letters:r,c:n,ctx:t})},rectStroke:function(e,_,r,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;t.strokeStyle=a.a.rgb(s),t.strokeRect(Math.floor(e)+.5,Math.floor(_)+.5,Math.floor(r)-1,Math.floor(n)-1)},camera:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f=Math.floor(e),m=Math.floor(_),t.setTransform(1,0,0,1,0,0),t.translate(-f,-m)},rectFill:function(e,_,r,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;t.fillStyle=a.a.rgb(s),t.fillRect(Math.floor(e),Math.floor(_),Math.floor(r),Math.floor(n))},resetMap:function(){E=JSON.parse(JSON.stringify(h))},map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;arguments.length>1&&void 0!==arguments[1]&&arguments[1],E.forEach(function(_,r){_.forEach(function(_,n){if(null!==_){var a=_%16*8,s=8*Math.floor(_/16),o=8*(n+e),i=8*r;o+7>=f&&o<f+128&&i+7>=m&&i<m+128&&t.drawImage(b,a,s,8,8,o,i,8,8)}})})},sprite:function(e,_,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];p({x:e,y:_,spriteIndex:r,darken:n,flipH:a,flipV:s,sprites:c,ctx:t})},circStroke:function(e,_,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;s({cx:Math.floor(e),cy:Math.floor(_),radius:Math.floor(r),ctx:t,color:a.a.rgb(n),onlyStroke:!0})},circFill:function(e,_,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;s({cx:Math.floor(e),cy:Math.floor(_),radius:Math.floor(r),ctx:t,color:a.a.rgb(n)})},clear:function(e){t.save(),t.setTransform(1,0,0,1,0,0),Object(n.isNil)(e)?t.clearRect(0,0,_,i):(t.fillStyle=a.a.rgb(e),t.fillRect(0,0,128,128)),t.restore()},getPixel:function(e,_){return function(e){var t=e.x,_=e.y,n=e.ctx,s=Object(r.a)(n.getImageData(t,_,1,1).data,4),o=s[0],i=s[1],l=s[2],c=s[3];if(255!==c)return 7;var u=a.a.lookup([o,i,l,c]);return null===u?7:u}({x:Math.floor(e-f),y:Math.floor(_-m),ctx:t})},setPixel:function(e,_){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(e){var t=e.x,_=e.y,r=e.ctx,n=e.color;r.fillStyle=n,r.fillRect(t,_,1,1)}({x:Math.floor(e),y:Math.floor(_),ctx:t,color:a.a.rgb(r)})}}}}},[[105,1,2]]]);
//# sourceMappingURL=main.02ae1df6.chunk.js.map