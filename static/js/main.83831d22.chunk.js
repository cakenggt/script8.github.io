(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,_){e.exports=_(102)},102:function(e,t,_){"use strict";_.r(t);var r=_(1),a=_.n(r),n=_(70),s=_.n(n),o=_(71);s.a.render(a.a.createElement(o.a,null),document.getElementById("root"))},20:function(e){e.exports={a:"0.1.245"}},206:function(e,t,_){},21:function(e,t,_){"use strict";_.d(t,"b",function(){return a});var r=["c","c#","d","d#","e","f","f#","g","g#","a","a#","b"],a=function(e){return r.indexOf(e)};t.a=function(e,t,_){var a=function(e){return r[e%r.length]}(e),n=function(e){return Math.floor(e/r.length)}(e)+(_?2:0);return t?"".concat(a).concat(n):a}},3:function(e,t,_){"use strict";for(var r=_(11),a=[[246,214,189],[195,163,138],[153,117,119],[129,98,113],[78,73,95],[32,57,79],[15,42,63],[8,20,30]],n=a.map(function(e){var t=Object(r.a)(e,3),_=t[0],a=t[1],n=t[2];return"rgb(".concat(_,",").concat(a,",").concat(n,")")}),s=[],o=0;o<8;o++){var i=a[o],l=255<<24|i[2]<<16|i[1]<<8|i[0];s[o]=l>>>0}for(var c={},u=0;u<8;u++)c[s[u]]=u;var d={rgb:function(e){return n[e%n.length]},triplet:function(e){return a[e%a.length]},int:function(e){return s[e%s.length]},lookupInt:function(e){return e in c?c[e]:7}};t.a=d},31:function(e,t,_){"use strict";t.a="initialState = {\n}\n\nupdate = (state, input, elapsed) => {\n}\n\ndrawActors = (state, fade) =>\n  state.actors && state.actors.forEach(actor =>\n    sprite(\n      actor.x,\n      actor.y,\n      actor.sprite,\n      fade ? actor.trailBrighten || -3 : actor.brighten,\n      actor.flipH,\n      actor.flipV\n    )\n  )\n\ndraw = state => {\n  camera()\n  clear()\n}"},33:function(e,t,_){"use strict";_.d(t,"a",function(){return a});var r={},a=["mousedown","ArrowUp","ArrowRight","ArrowDown","ArrowLeft","a","b","Enter"," "];t.b=function(e){for(var t=(window.navigator.getGamepads&&window.navigator.getGamepads()[0]||{}).buttons,_={__mousedown:e.has("mousedown"),up:e.has("ArrowUp")||t&&t[12].pressed,right:e.has("ArrowRight")||t&&t[15].pressed,down:e.has("ArrowDown")||t&&t[13].pressed,left:e.has("ArrowLeft")||t&&t[14].pressed,a:e.has("a")||t&&(t[1].pressed||t[2].pressed),b:e.has("b")||t&&(t[0].pressed||t[3].pressed),start:e.has("Enter")||t&&t[9].pressed,select:e.has(" ")||t&&t[8].pressed},a=Object.keys(_),n=0;n<a.length;n++){var s=a[n];if(!s.startsWith("__")){var o=!r[s]&&_[s];_[s+"Pressed"]=o;var i=r[s]&&!_[s];_[s+"Released"]=i}}return r=_,_}},48:function(e,t,_){"use strict";var r=_(30),a=_(4),n=_(7),s=_(0),o=_.n(s),i=function(e){return e.length||e.push(0),e.reduce(function(e,t,_){if(_>0){var r=e[_-1];return[].concat(Object(a.a)(e),[[r[1],r[1]+t]])}return[[0,t]]},[])};_.d(t,"b",function(){return c}),_.d(t,"a",function(){return l});var l=function(e){return o()(e).orderBy(function(e,t){return t}).map("text").filter(function(e){return!o.a.isEmpty(e)}).value().join("\n")},c=function(e){var t=JSON.parse(o.a.get(e,'files["misc.json"].content',"{}")),_=o.a.get(e,'files["code.js"].content',"");if(t.lines){var s=i(t.lines),l=_.split("\n");return s.reduce(function(e,t,_){return Object(n.a)({},e,Object(r.a)({},_,{text:l.slice.apply(l,Object(a.a)(t)).join("\n"),active:0===_,key:_}))},{})}return{0:{text:_,active:!0,key:0}}}},71:function(module,__webpack_exports__,__webpack_require__){"use strict";var _Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(98),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(72),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(73),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(99),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(74),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(2),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(100),react__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_9__),classnames__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(12),classnames__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_10__),deep_equal__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(6),deep_equal__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(deep_equal__WEBPACK_IMPORTED_MODULE_11__),tone__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5),tone__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(tone__WEBPACK_IMPORTED_MODULE_12__),d3_timer__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(96),redux__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(22),lodash__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(0),lodash__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_15__),lodash_range__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(32),lodash_range__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(lodash_range__WEBPACK_IMPORTED_MODULE_16__),lodash_flatten__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(47),lodash_flatten__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(lodash_flatten__WEBPACK_IMPORTED_MODULE_17__),lodash_random__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(77),lodash_random__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(lodash_random__WEBPACK_IMPORTED_MODULE_18__),lodash_clamp__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(14),lodash_clamp__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(lodash_clamp__WEBPACK_IMPORTED_MODULE_19__),lodash_once__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(78),lodash_once__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(lodash_once__WEBPACK_IMPORTED_MODULE_20__),lodash_uniqBy__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(79),lodash_uniqBy__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(lodash_uniqBy__WEBPACK_IMPORTED_MODULE_21__),lodash_isEmpty__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(80),lodash_isEmpty__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_22__),_utils_bios_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(81),javascript_state_machine__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(82),javascript_state_machine__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(javascript_state_machine__WEBPACK_IMPORTED_MODULE_24__),_soundAPI_index_js__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(97),_frameBufferCanvasAPI_index_js__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(94),_contextCanvasAPI_index_js__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(95),_contextCanvasAPI_trimCanvas_js__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(83),_validateToken_js__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(84),_getUserInput_js__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(33),_createReducer_js__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(85),_skeleton_js__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(31),_gistParsers_map_js__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(86),_gistParsers_sprites_js__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(87),_gistParsers_phrases_js__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(88),_gistParsers_chains_js__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(90),_gistParsers_songs_js__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(91),_gistParsers_game_js__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(48),_utils_errorLocation_js__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(92),_css_Iframe_css__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(206),_css_Iframe_css__WEBPACK_IMPORTED_MODULE_40___default=__webpack_require__.n(_css_Iframe_css__WEBPACK_IMPORTED_MODULE_40__),_package_json__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(20),_package_json__WEBPACK_IMPORTED_MODULE_41___namespace=__webpack_require__.t(20,1),platform=window.navigator.platform;console.log(JSON.stringify("SCRIPT-8 iframe v ".concat(_package_json__WEBPACK_IMPORTED_MODULE_41__.a),null,2));var getUniqueErrorMessages=function(e){return lodash__WEBPACK_IMPORTED_MODULE_15___default()(e).map(function(e,t){return{type:t,data:e}}).filter(function(e){return e.data&&e.type}).sortBy("type").uniqBy("data").value()};window.initialState=null,window.update=null,window.drawActors=null,window.draw=null,window.embedState={},window._script8={globalKeys:new Set};var NOOP=function(){},FPS=60,SECONDS=2,CANVAS_SIZE=128,ACTOR_FRAME_SKIP=5,Iframe=function(_Component){function Iframe(e){var t;return Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.a)(this,Iframe),(t=Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__.a)(this,Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__.a)(Iframe).call(this,e))).ArrowUpElement=null,t.setArrowUpRef=function(e){t.ArrowUpElement=e},t.ArrowRightElement=null,t.setArrowRightRef=function(e){t.ArrowRightElement=e},t.ArrowDownElement=null,t.setArrowDownRef=function(e){t.ArrowDownElement=e},t.ArrowLeftElement=null,t.setArrowLeftRef=function(e){t.ArrowLeftElement=e},t.aElement=null,t.setaRef=function(e){t.aElement=e},t.bElement=null,t.setbRef=function(e){t.bElement=e},t.EnterElement=null,t.setEnterRef=function(e){t.EnterElement=e},t.SpaceElement=null,t.setSpaceRef=function(e){t.SpaceElement=e},t.touchstartArrowUp=t.touchstartArrowUp.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchstartArrowRight=t.touchstartArrowRight.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchstartArrowDown=t.touchstartArrowDown.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchstartArrowLeft=t.touchstartArrowLeft.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchstarta=t.touchstarta.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchstartb=t.touchstartb.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchstartEnter=t.touchstartEnter.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchstartSpace=t.touchstartSpace.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchendArrowUp=t.touchendArrowUp.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchendArrowRight=t.touchendArrowRight.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchendArrowDown=t.touchendArrowDown.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchendArrowLeft=t.touchendArrowLeft.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchenda=t.touchenda.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchendb=t.touchendb.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchendEnter=t.touchendEnter.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.touchendSpace=t.touchendSpace.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.updateGlobals=t.updateGlobals.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.evalCode=t.evalCode.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.startTimer=t.startTimer.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.handleTimelineInput=t.handleTimelineInput.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.handleActorClick=t.handleActorClick.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.handlePauseClick=t.handlePauseClick.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.handleRestartClick=t.handleRestartClick.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.errorLogger=t.errorLogger.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.loggerErrors={},t.logger=t.logger.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(t)),t.log=null,t.heightSent=0,t.shadows=new Set(["document"]),t.blacklist=new Set(["eval","alert","_script8"]),t.keys=new Set,t.timer=null,t.previousElapsed=0,t.fpsValues=[],t.volumeNode=new tone__WEBPACK_IMPORTED_MODULE_12__.Volume,t.reducer=Object(_createReducer_js__WEBPACK_IMPORTED_MODULE_31__.a)(t.errorLogger),t.store=null,t.previousInitialState=null,t.reduxHistory=[],t.reduxLogger=function(e){return function(_){return function(r){return t.reduxHistory=[].concat(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__.a)(t.reduxHistory),[{state:e.getState(),action:r}]).slice(-FPS*SECONDS),_(r)}}},t.soundFunctions=null,t.songSequences=null,t.state={started:!1,fps:null,game:"",sprites:{},map:{},songs:{},chains:{},phrases:{},timelineIndex:0,actors:[],selectedActors:[],message:null,callbacks:{},isPaused:!0,alteredStates:[],run:!0,sound:!0},t._pixelData=new ImageData(CANVAS_SIZE,CANVAS_SIZE),t._pixelBuffer=new ArrayBuffer(4*CANVAS_SIZE*CANVAS_SIZE),t._pixelBytes=new Uint8ClampedArray(t._pixelBuffer),t._pixelIntegers=new Uint32Array(t._pixelBuffer),t}return Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_8__.a)(Iframe,_Component),Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__.a)(Iframe,[{key:"logger",value:function(e){if(!this.isEmbed){var t=this.state,_=t.message;t.run||lodash__WEBPACK_IMPORTED_MODULE_15___default.a.isNil(e)||JSON.stringify(this.log)!==JSON.stringify(this.value)&&(this.log=e,_.ports[0].postMessage({log:this.log}))}}},{key:"errorLogger",value:function(e){var t=e.type,_=e.error,r=void 0===_?null:_,a=this.state,n=a.message,s=a.run;if(r){var o={message:r.message,position:Object(_utils_errorLocation_js__WEBPACK_IMPORTED_MODULE_39__.a)(r)};JSON.stringify(this.loggerErrors[t])!==JSON.stringify(o)&&(this.loggerErrors[t]=o,this.isEmbed||n.ports[0].postMessage({errors:getUniqueErrorMessages(this.loggerErrors)}))}else this.loggerErrors[t]&&(this.loggerErrors[t]=null,this.isEmbed||n.ports[0].postMessage({errors:getUniqueErrorMessages(this.loggerErrors)}));if(s){var i=getUniqueErrorMessages(this.loggerErrors).map(function(e){return"error: ".concat(e.data.message)}).join(". ");i.length&&(lodash__WEBPACK_IMPORTED_MODULE_15___default.a.chunk(i,32).forEach(function(e,t){var _=e.join("");lodash_range__WEBPACK_IMPORTED_MODULE_16___default()(3).forEach(function(e){return lodash_range__WEBPACK_IMPORTED_MODULE_16___default()(3).forEach(function(r){return window.print(1+e,1+r+8*t,_,7)})}),window.print(2,2+8*t,_,0)}),this.useFrameBufferRenderer&&this.writePixelDataToCanvas())}}},{key:"touchstartArrowUp",value:function(){this.ArrowUpElement.classList.add("on"),this.keys.add("ArrowUp")}},{key:"touchstartArrowRight",value:function(){this.ArrowRightElement.classList.add("on"),this.keys.add("ArrowRight")}},{key:"touchstartArrowDown",value:function(){this.ArrowDownElement.classList.add("on"),this.keys.add("ArrowDown")}},{key:"touchstartArrowLeft",value:function(){this.ArrowLeftElement.classList.add("on"),this.keys.add("ArrowLeft")}},{key:"touchstarta",value:function(){this.aElement.classList.add("on"),this.keys.add("a")}},{key:"touchstartb",value:function(){this.bElement.classList.add("on"),this.keys.add("b")}},{key:"touchstartEnter",value:function(){this.EnterElement.classList.add("on"),this.keys.add("Enter")}},{key:"touchstartSpace",value:function(){this.SpaceElement.classList.add("on"),this.keys.add(" ")}},{key:"touchendArrowUp",value:function(){this.ArrowUpElement.classList.remove("on"),this.keys.delete("ArrowUp")}},{key:"touchendArrowRight",value:function(){this.ArrowRightElement.classList.remove("on"),this.keys.delete("ArrowRight")}},{key:"touchendArrowDown",value:function(){this.ArrowDownElement.classList.remove("on"),this.keys.delete("ArrowDown")}},{key:"touchendArrowLeft",value:function(){this.ArrowLeftElement.classList.remove("on"),this.keys.delete("ArrowLeft")}},{key:"touchenda",value:function(){this.aElement.classList.remove("on"),this.keys.delete("a")}},{key:"touchendb",value:function(){this.bElement.classList.remove("on"),this.keys.delete("b")}},{key:"touchendEnter",value:function(){this.EnterElement.classList.remove("on"),this.keys.delete("Enter")}},{key:"touchendSpace",value:function(){this.SpaceElement.classList.remove("on"),this.keys.delete(" ")}},{key:"updateGlobals",value:function(e){var t;if(e)t=e;else{var _=this.useFrameBufferRenderer?_frameBufferCanvasAPI_index_js__WEBPACK_IMPORTED_MODULE_26__.a:_contextCanvasAPI_index_js__WEBPACK_IMPORTED_MODULE_27__.a;t=Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__.a)({console:console,StateMachine:javascript_state_machine__WEBPACK_IMPORTED_MODULE_24___default.a,JSON:JSON,Math:Math,Object:Object,Array:Array,log:this.logger},_({pixels:this._pixelIntegers,ctx:this._canvas.getContext("2d"),width:CANVAS_SIZE,height:CANVAS_SIZE,sprites:this.state.sprites,map:this.state.map}),{range:lodash_range__WEBPACK_IMPORTED_MODULE_16___default.a,flatten:lodash_flatten__WEBPACK_IMPORTED_MODULE_17___default.a,random:lodash_random__WEBPACK_IMPORTED_MODULE_18___default.a,clamp:lodash_clamp__WEBPACK_IMPORTED_MODULE_19___default.a})}Object.keys(t).forEach(function(e){window[e]=t[e],window._script8.globalKeys.add(e)})}},{key:"writePixelDataToCanvas",value:function(){this._pixelData.data.set(this._pixelBytes),this._canvas.getContext("2d").putImageData(this._pixelData,0,0)}},{key:"drawUserGraphics",value:function(e){window.draw&&(window.draw(e),this.useFrameBufferRenderer&&this.writePixelDataToCanvas())}},{key:"componentDidMount",value:function(){var e=this;window.USE_FRAME_BUFFER_RENDERER&&(this.useFrameBufferRenderer=!0),this.soundFunctions=Object(_soundAPI_index_js__WEBPACK_IMPORTED_MODULE_25__.a)(this.volumeNode),this.updateGlobals({playSong:this.soundFunctions.playSong,playPhrase:this.soundFunctions.playPhrase,stopSong:this.soundFunctions.stopSong}),this.mousedownHandler=function(){e.keys.add("mousedown")},this.mouseupHandler=function(){e.keys.delete("mousedown")},this.keydownHandler=function(t){var _=t.altKey,r=t.metaKey,a=t.ctrlKey,n=t.key,s=e.state.message;(!e.isEmbed&&r&&"s"===n&&lodash__WEBPACK_IMPORTED_MODULE_15___default.a.includes(platform,"Mac")||a&&"s"===n&&!lodash__WEBPACK_IMPORTED_MODULE_15___default.a.includes(platform,"Mac"))&&(t.preventDefault(),s.ports[0].postMessage({shortcut:"save"})),!e.isEmbed&&_&&("."===n&&(t.preventDefault(),s.ports[0].postMessage({shortcut:"previous"})),"/"===n&&(t.preventDefault(),s.ports[0].postMessage({shortcut:"next"}))),_getUserInput_js__WEBPACK_IMPORTED_MODULE_30__.a.includes(n)&&(t.preventDefault(),t.stopPropagation()),e.keys.add(n)},this.keyupHandler=function(t){var _=t.key;_getUserInput_js__WEBPACK_IMPORTED_MODULE_30__.a.includes(_)&&(t.preventDefault(),t.stopPropagation()),e.keys.delete(_)},document.addEventListener("touchstart",this.mousedownHandler),document.addEventListener("mousedown",this.mousedownHandler),document.addEventListener("touchend",this.mouseupHandler),document.addEventListener("mouseup",this.mouseupHandler),document.addEventListener("keydown",this.keydownHandler),document.addEventListener("keyup",this.keyupHandler);var t=function(t){var _=t.data,r=_.type,a=Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__.a)(_,["type"]),n=e.blacklist,s=e.shadows;if("callCode"===r){var o=!0!==a.run&&e.state.isPaused;a.run&&e.state.isPaused&&(e.handlePauseClick(),o=!1),e.state.isPaused&&a.isNew&&!e.state.isNew&&(e.handlePauseClick(),o=!1),a.useFrameBufferRenderer&&(e.useFrameBufferRenderer=!0,e.updateGlobals()),e.setState({game:a.game,sprites:a.sprites,map:a.map,message:t,run:a.run,isPaused:o,sound:a.sound,callbacks:a.callbacks,phrases:a.phrases,chains:a.chains,songs:a.songs,isNew:a.isNew,isDoneFetching:a.isDoneFetching})}else if("findInvalidToken"===r){var i=a.tokens.findIndex(function(e){return!Object(_validateToken_js__WEBPACK_IMPORTED_MODULE_29__.a)({token:e,blacklist:n,globals:window._script8.globalKeys,shadows:s})});t.ports[0].postMessage(i)}else if("image"===r){var l=document.createElement("canvas");l.width=128,l.height=128,l.getContext("2d").drawImage(e._canvas,0,0,128,128),t.ports[0].postMessage(l.toDataURL())}};window.SCRIPT_8_EMBEDDED_GIST_ID?(this.isEmbed=!0,window.fetch("".concat("https://script-8-api-4l7lehio6.now.sh","/gist/").concat(window.SCRIPT_8_EMBEDDED_GIST_ID)).then(function(e){return e.json()}).then(function(_){e.gist=_,t({data:{type:"callCode",game:_utils_bios_js__WEBPACK_IMPORTED_MODULE_23__.a,isDoneFetching:!0,songs:Object(_gistParsers_songs_js__WEBPACK_IMPORTED_MODULE_37__.a)(_),chains:Object(_gistParsers_chains_js__WEBPACK_IMPORTED_MODULE_36__.a)(_),phrases:Object(_gistParsers_phrases_js__WEBPACK_IMPORTED_MODULE_35__.a)(_),sprites:Object(_gistParsers_sprites_js__WEBPACK_IMPORTED_MODULE_34__.a)(_),map:Object(_gistParsers_map_js__WEBPACK_IMPORTED_MODULE_33__.a)(_),run:!0,callbacks:{},sound:!0}})})):window.addEventListener("message",t),this.updateGlobals()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("touchstart",this.mousedownHandler),document.removeEventListener("mousedown",this.mousedownHandler),document.removeEventListener("touchend",this.mouseupHandler),document.removeEventListener("mouseup",this.mouseupHandler),document.removeEventListener("keydown",this.keydownHandler),document.removeEventListener("keyup",this.keyupHandler)}},{key:"evalCode",value:function evalCode(){var _this3=this,shadows=this.shadows,state=this.state,game=state.game,message=state.message,callbacks=state.callbacks,isDoneFetching=state.isDoneFetching;try{isDoneFetching&&(window._script8.end=lodash_once__WEBPACK_IMPORTED_MODULE_20___default()(function(){_this3.setState({game:Object(_gistParsers_game_js__WEBPACK_IMPORTED_MODULE_38__.a)(Object(_gistParsers_game_js__WEBPACK_IMPORTED_MODULE_38__.b)(_this3.gist)),started:!0}),"running"!==tone__WEBPACK_IMPORTED_MODULE_12__.context.state&&tone__WEBPACK_IMPORTED_MODULE_12__.start(),_this3.isEmbed||message.ports[0].postMessage({callback:callbacks.endCallback})})),this.previousInitialState=window.initialState;var embedStateString=this.isEmbed?"embedState = JSON.parse(JSON.stringify(initialState))":"",shadowString="var ".concat(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__.a)(shadows).join(",")),innerSkeleton=_skeleton_js__WEBPACK_IMPORTED_MODULE_32__.a;eval("\n      // Shadow variables we don't want available.\n      ".concat(shadowString,"\n      // The inception eval allows the user to declare vars (e.g. screen).\n      eval(innerSkeleton)\n      eval(game)\n      ").concat(embedStateString,"\n      if (initialState && typeof initialState === 'function') {\n        initialState = this.previousInitialState\n      }\n    ")),this.errorLogger({type:"evalCode"})}catch(e){this.errorLogger({type:"evalCode",error:e})}}},{key:"stopTimer",value:function(){this.timer&&this.timer.stop()}},{key:"startTimer",value:function(){var e=this;this.timer&&this.timer.stop(),this.previousElapsed=0,this.timer=Object(d3_timer__WEBPACK_IMPORTED_MODULE_13__.a)(function(t){try{var _,r=t-e.previousElapsed,a=Math.round(1e3/r);if(e.fpsValues.push(a),e.fpsValues.length%60===0){var n=e.fpsValues.reduce(function(e,t){return e+t})/e.fpsValues.length;_=Math.round(n)}e.previousElapsed=t;var s=Object(_getUserInput_js__WEBPACK_IMPORTED_MODULE_30__.b)(e.keys);e.isEmbed?window.update(window.embedState,s,r):e.store.dispatch({type:"TICK",input:s,elapsed:r}),e.drawUserGraphics(e.isEmbed?window.embedState:e.store.getState()),void 0!==_&&_!==e.state.fps&&e.setState({fps:_}),e.errorLogger({type:"startTimer"})}catch(o){e.errorLogger({type:"startTimer",error:o})}},1e3/FPS)}},{key:"handleTimelineInput",value:function(e){this.setState({timelineIndex:+e.target.value})}},{key:"handleActorClick",value:function(e){var t=this.state.selectedActors,_=t.includes(e)?t.filter(function(t){return t!==e}):[].concat(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__.a)(t),[e]);this.setState({selectedActors:_})}},{key:"handleRestartClick",value:function(){window.initialState=Date.now(),window.embedState="SCRIPT-8-RESTART",this.reduxHistory=[],window.resetMap(),this.forceUpdate()}},{key:"handlePauseClick",value:function(){this.state.isPaused?(this.reduxHistory=[],this.startTimer()):this.stopTimer(),this.setState({selectedActors:[],actors:[],fps:null,isPaused:!this.state.isPaused})}},{key:"componentDidUpdate",value:function(e,t){var _,r=this,a=this.state,n=this.shadows,s=a.message,o=a.isPaused,i=a.game,l=a.sprites,c=a.map,u=a.timelineIndex,d=a.actors,h=a.selectedActors,p=a.sound,E=a.songs,f=a.chains,m=a.phrases,b=a.run;if(deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(l,t.sprites)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(c,t.map)||this.updateGlobals(),deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(p,t.sound)||(tone__WEBPACK_IMPORTED_MODULE_12__.Master.mute=!p),deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(E,t.songs)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(f,t.chains)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(m,t.phrases)||(this.soundFunctions.makeSongs({songs:E,chains:f,phrases:m}),this.handleRestartClick()),this.volumeNode.mute=!b,o)if(deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(o,t.isPaused)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(i,t.game)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(l,t.sprites)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(c,t.map)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(u,t.timelineIndex)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(h,t.selectedActors)){var M=Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__.a)(this._ul.querySelectorAll("button")),O=Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__.a)(this._ul.querySelectorAll("canvas"));if(M.length!==O.length){var g=this._canvas.getContext("2d");d.forEach(function(e,t){r.useFrameBufferRenderer?r._pixelIntegers.fill(0):(g.save(),g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,CANVAS_SIZE,CANVAS_SIZE)),window.drawActors({actors:[Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__.a)({},e,{x:64,y:64})]}),r.useFrameBufferRenderer&&r.writePixelDataToCanvas();var _=Object(_contextCanvasAPI_trimCanvas_js__WEBPACK_IMPORTED_MODULE_28__.a)({ctx:r._canvas.getContext("2d"),width:CANVAS_SIZE,height:CANVAS_SIZE});M[t].appendChild(_)}),this.drawUserGraphics(this.store.getState()),this.useFrameBufferRenderer||g.restore()}}else try{if(this.reduxHistory.length){this.evalCode(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__.a)({},a,{shadows:n}));var D=[];this.store=Object(redux__WEBPACK_IMPORTED_MODULE_14__.b)(this.reducer,this.reduxHistory[0].state),D.push(this.store.getState()),this.reduxHistory.forEach(function(e,t){e.state;var _=e.action;t===u-1?r.updateGlobals({log:r.logger}):r.updateGlobals({log:NOOP}),r.store.dispatch(_),D.push(r.store.getState())}),this.updateGlobals({log:this.logger}),D=D.filter(function(e){return!lodash_isEmpty__WEBPACK_IMPORTED_MODULE_22___default()(e)});var P=t.isPaused?u:D.length-1,v=D[P];this.drawUserGraphics(v);var A=lodash_flatten__WEBPACK_IMPORTED_MODULE_17___default()(D.map(function(e){return e.actors})).filter(function(e){return e}),w=lodash_uniqBy__WEBPACK_IMPORTED_MODULE_21___default()(A,function(e){return e.id});D.forEach(function(e,t){if(t!==P&&t%ACTOR_FRAME_SKIP===0||t===D.length-1){var _=e.actors&&e.actors.filter(function(e){return h.includes(e.id)})||[];r.updateGlobals({log:NOOP}),window.drawActors&&window.drawActors({actors:_},!0),r.updateGlobals({log:r.logger})}});var I=D[P];window.drawActors&&I&&I.actors&&window.drawActors({actors:I.actors.filter(function(e){return h.includes(e.id)})}),this.useFrameBufferRenderer&&this.writePixelDataToCanvas(),this.store=Object(redux__WEBPACK_IMPORTED_MODULE_14__.b)(this.reducer,v),this.setState({alteredStates:D,actors:w,timelineIndex:P})}this.errorLogger({type:"isPaused"})}catch(T){this.errorLogger({type:"isPaused",error:T})}else this.isEmbed?i===t.game&&"SCRIPT-8-RESTART"!==window.embedState||this.evalCode(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__.a)({},a,{shadows:n})):!t.isPaused&&i===t.game&&b===t.run&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(window.initialState,this.previousInitialState)||(this.evalCode(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__.a)({},a,{shadows:n})),deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(window.initialState,this.previousInitialState)?_=this.store&&this.store.getState()||{}:(_=window.initialState,this.reduxHistory=[]),this.store=Object(redux__WEBPACK_IMPORTED_MODULE_14__.b)(this.reducer,_||void 0,Object(redux__WEBPACK_IMPORTED_MODULE_14__.a)(this.reduxLogger)));if(this.timer||o||this.startTimer(),s){var C=document.body.querySelector(".container").scrollHeight;C===this.heightSent||this.isEmbed||(s.ports[0].postMessage({height:C}),this.heightSent=C)}}},{key:"render",value:function(){var e=this,t=this.state,_=t.isPaused,r=t.actors,a=t.alteredStates,n=t.timelineIndex,s=t.selectedActors,o=t.fps,i=t.run,l=t.started;return react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{className:"Iframe"},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{className:"container"},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("canvas",{className:"master",width:CANVAS_SIZE,height:CANVAS_SIZE,ref:function(t){e._canvas=t}}),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_10___default()("mobile-buttons",{hide:!i})},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setArrowLeftRef,className:"button left",onTouchStart:this.touchstartArrowLeft,onTouchEnd:this.touchendArrowLeft},"<"),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setArrowUpRef,className:"button up",onTouchStart:this.touchstartArrowUp,onTouchEnd:this.touchendArrowUp},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("span",null,">")),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setArrowRightRef,className:"button right",onTouchStart:this.touchstartArrowRight,onTouchEnd:this.touchendArrowRight},">"),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setaRef,className:"button a",onTouchStart:this.touchstarta,onTouchEnd:this.touchenda},"A"),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setbRef,className:"button b",onTouchStart:this.touchstartb,onTouchEnd:this.touchendb},"B"),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setArrowDownRef,className:"button down",onTouchStart:this.touchstartArrowDown,onTouchEnd:this.touchendArrowDown},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("span",null,"<")),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setSpaceRef,className:"button select",onTouchStart:this.touchstartSpace,onTouchEnd:this.touchendSpace},"Select"),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setEnterRef,className:"button start",onTouchStart:this.touchstartEnter,onTouchEnd:this.touchendEnter},"Start")),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_10___default()("stats",{invisible:i&&!l})},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("button",{className:"button play",onClick:this.handlePauseClick},_?"play":"pause"),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("button",{className:classnames__WEBPACK_IMPORTED_MODULE_10___default()("button play",{hide:_}),onClick:this.handleRestartClick},"restart"),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_10___default()("fps",{hide:_||!0})},"fps (avg): ",react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("span",null,o))),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_10___default()("timeline",{hide:i||0===a.length,invisible:!_})},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("input",{type:"range",value:n,min:0,max:a.length-1,onChange:this.handleTimelineInput}),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("ul",{ref:function(t){e._ul=t}},r.map(function(t,_){return react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("li",{key:t.id,className:classnames__WEBPACK_IMPORTED_MODULE_10___default()({hide:_>6})},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("button",{className:classnames__WEBPACK_IMPORTED_MODULE_10___default()({active:s.includes(t.id)}),onClick:function(){return e.handleActorClick(t.id)}}))})))))}}]),Iframe}(react__WEBPACK_IMPORTED_MODULE_9__.Component);__webpack_exports__.a=Iframe},81:function(e,t,_){"use strict";var r=_(20),a=_(31),n="\n\nconst modes = ['glitch', 'numbers', 'pre-ram', 'ram', 'run', 'end']\n\nconst size = range(128)\nconst d = 1\n\nconst rects = flatten(size.map(x => size.map(y => [x, y, d, 128])))\n\nconst biosLines = range(18).map(() => {\n  return (\n    '  ' +\n    range(4)\n      .map(() => random(1000, 9999))\n      .join('      ')\n  )\n})\n\ninitialState = {\n  counter: 0,\n  totalElapsed: 0,\n  modeIndex: 0\n}\n\nupdate = (state, input, elapsed) => {\n  const mode = modes[state.modeIndex]\n\n  state.counter++\n  state.totalElapsed += elapsed\n\n  if (mode === 'glitch' && state.totalElapsed > 500) {\n    state.modeIndex++\n    state.totalElapsed = 0\n  } else if (mode === 'numbers' && state.totalElapsed > 100) {\n    state.modeIndex++\n    state.totalElapsed = 0\n  } else if (mode === 'pre-ram' && state.totalElapsed > 100) {\n    state.modeIndex++\n    state.totalElapsed = 0\n    state.counter = 0\n  } else if (mode === 'ram' && state.counter > 64 && _script8.end) {\n    // The _script8.end function is not defined until we're done fetching the gist.\n    state.modeIndex++\n    state.totalElapsed = 0\n    state.counter++\n  } else if (mode === 'run') {\n    if (input.__mousedown) {\n      ".concat(a.a,"\n      _script8.end()\n    }\n  }\n}\n\ndraw = state => {\n  const { modeIndex, counter } = state\n  const mode = modes[modeIndex]\n\n  if (mode === 'glitch') {\n    rects.forEach(rect => {\n      rectFill(...rect, rect[0] + (rect[1] * counter) / 100)\n    })\n  }\n\n  if (mode === 'numbers') {\n    const factor = 4\n    if (counter % factor === 0) {\n      rectFill(0, 0, 128, 128, 7)\n      biosLines.forEach((line, j) => {\n        print(0, 128 + 7 * j - (7 * counter) / factor, line, 5)\n      })\n    }\n  }\n\n  if (mode === 'pre-ram') {\n    rectFill(0, 0, 128, 128, 7)\n  }\n\n  if (mode === 'ram') {\n    rectFill(0, 0, 128, 128, 6)\n    print(7, 7 * 1, 'script-8', 0)\n    print(7, 7 * 3, 'bios (c) 1980 pantron inc.', 3)\n    print(7, 7 * 4, 'version ").concat(r.a,"', 3)\n    print(7, 7 * 6, 'RAM: ' + Math.min(state.counter, 32) + ' kb', 3)\n\n    print(\n      7,\n      7 * 9,\n      'booting cassette ' +\n        (Math.floor(state.counter / 20) % 2 === 0 ? '' : '+'),\n      3\n    )\n\n    rectFill(48 + 3 * 0, 7, 3, 5, 0)\n    rectFill(48 + 3 * 1, 7, 3, 5, 1)\n    rectFill(48 + 3 * 2, 7, 3, 5, 2)\n    rectFill(48 + 3 * 3, 7, 3, 5, 3)\n    rectFill(48 + 3 * 4, 7, 3, 5, 4)\n    rectFill(48 + 3 * 5, 7, 3, 5, 5)\n    rectFill(48 + 3 * 6, 7, 3, 5, 4)\n    rectFill(48 + 3 * 7, 7, 3, 5, 3)\n    rectFill(48 + 3 * 8, 7, 3, 5, 2)\n    rectFill(48 + 3 * 9, 7, 3, 5, 1)\n    rectFill(48 + 3 * 10, 7, 3, 5, 0)\n  }\n\n  if (mode === 'run') {\n    rectFill(0, 0, 128, 128, 6)\n    print(7, 7 * 1, 'script-8', 0)\n    print(7, 7 * 3, 'bios (c) 1980 pantron inc.', 3)\n    print(7, 7 * 4, 'version ").concat(r.a,"', 3)\n    print(7, 7 * 6, 'RAM: ' + Math.min(state.counter, 32) + ' kb', 3)\n\n    print(7, 7 * 9, 'booting cassette done. ', 3)\n\n    rectFill(48 + 3 * 0, 7, 3, 5, 0)\n    rectFill(48 + 3 * 1, 7, 3, 5, 1)\n    rectFill(48 + 3 * 2, 7, 3, 5, 2)\n    rectFill(48 + 3 * 3, 7, 3, 5, 3)\n    rectFill(48 + 3 * 4, 7, 3, 5, 4)\n    rectFill(48 + 3 * 5, 7, 3, 5, 5)\n    rectFill(48 + 3 * 6, 7, 3, 5, 4)\n    rectFill(48 + 3 * 7, 7, 3, 5, 3)\n    rectFill(48 + 3 * 8, 7, 3, 5, 2)\n    rectFill(48 + 3 * 9, 7, 3, 5, 1)\n    rectFill(48 + 3 * 10, 7, 3, 5, 0)\n    print(7, 7 * 11, '> click to run', 3)\n    rectFill(7, 7 * 12, 4, 5, Math.floor(state.counter / 25) % 2 ? 0 : 6)\n  }\n}\n\n");t.a=n},83:function(e,t,_){"use strict";t.a=function(e){var t,_,r,a=e.ctx,n=e.width,s=e.height,o=a.getImageData(0,0,n,s),i=o.data.length,l={top:null,left:null,right:null,bottom:null};for(t=0;t<i;t+=4)0!==o.data[t+3]&&(_=t/4%n,r=~~(t/4/n),null===l.top&&(l.top=r),null===l.left?l.left=_:_<l.left&&(l.left=_),null===l.right?l.right=_:l.right<_&&(l.right=_),null===l.bottom?l.bottom=r:l.bottom<r&&(l.bottom=r));l.bottom+=1,l.right+=1;var c=document.createElement("canvas"),u=c.getContext("2d"),d=l.bottom-l.top,h=l.right-l.left,p=Math.max(h,d),E=a.getImageData(l.left,l.top,h,d);return u.canvas.width=p,u.canvas.height=p,u.putImageData(E,0,0),c}},84:function(e,t,_){"use strict";t.a=function(e){var t,_=e.token,r=e.blacklist,a=e.globals,n=e.shadows;return r.has(_)?t=!1:a.has(_)||"initialState"===_||"update"===_||"drawActors"===_||"draw"===_?t=!0:window.hasOwnProperty(_)?(n.add(_),t=!0):t=!0,t}},85:function(e,t,_){"use strict";t.a=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.initialState||{},_=arguments.length>1?arguments[1]:void 0;switch(_.type){case"TICK":if(window.update){var r;try{if(r=JSON.parse(JSON.stringify(t)),window.update(r,_.input,_.elapsed),r.actors&&r.actors.filter(function(e){return!e.id}).length)throw new Error("Actors must have an id property.");e({type:"reducerError"})}catch(a){return e({type:"reducerError",error:a}),t}return r}return t;default:return t}}}},86:function(e,t,_){"use strict";_.d(t,"a",function(){return s});var r=_(0),a=_.n(r),n=_(9),s=function(e){return JSON.parse(a.a.get(e,'files["map.json"].content',JSON.stringify(n.a.map,null,2)))}},87:function(e,t,_){"use strict";_.d(t,"a",function(){return s});var r=_(0),a=_.n(r),n=_(9),s=function(e){return JSON.parse(a.a.get(e,'files["sprites.json"].content',JSON.stringify(n.a.sprites,null,2)))}},88:function(e,t,_){"use strict";_.d(t,"a",function(){return l});var r=_(0),a=_.n(r),n=_(89),s=_.n(n),o=_(9),i=_(21),l=function(e){return t=JSON.parse(a.a.get(e,'files["phrases.json"].content',JSON.stringify(o.a.phrases,null,2))),s()(a.a.mapValues(t,function(e){var t=Array.isArray(e),_=a()(t?e:e.notes).map(function(e){return e.match(/^(\d+)(.*)(\d)(\d)/).slice(1,5)}).map(function(e){return{index:e[0],note:Object(i.b)(e[1]),octave:+e[2],volume:+e[3]}}).keyBy("index").mapValues(function(e){return a.a.omit(e,"index")}).value();return a.a.isEmpty(_)?null:{notes:_,tempo:t?0:a.a.isNil(e.tempo)?0:e.tempo}}));var t}},9:function(e,t,_){"use strict";var r={BOOT:"BOOT",HOME:"HOME",RUN:"RUN",HELP:"HELP",CODE:"CODE",SPRITE:"SPRITE",MAP:"MAP",SONG:"SONG",CHAIN:"CHAIN",PHRASE:"PHRASE",SHELF:"SHELF"},a={errorLine:null,screen:r.BOOT,booted:!1,gist:{},game:{0:{text:"",active:!0,key:0}},token:{},nextAction:null,sprites:{},map:[],phrases:{},chains:{},songs:{},docHistories:{},dismissedNotices:[],selectedUi:{phrase:0,chain:0,song:0},tutorial:null,sound:!0,shelving:!1};t.a=a},90:function(e,t,_){"use strict";_.d(t,"a",function(){return s});var r=_(0),a=_.n(r),n=_(9),s=function(e){return JSON.parse(a.a.get(e,'files["chains.json"].content',JSON.stringify(n.a.chains,null,2)))}},91:function(e,t,_){"use strict";_.d(t,"a",function(){return s});var r=_(0),a=_.n(r),n=_(9),s=function(e){return JSON.parse(a.a.get(e,'files["songs.json"].content',JSON.stringify(n.a.songs,null,2)))}},92:function(e,t,_){"use strict";_.d(t,"a",function(){return s});var r=_(93),a=Object(r.detect)(),n={chrome:/\(eval at <anonymous> \(eval at evalCode \(.+:\d+\)\), <anonymous>:(\d+):(\d+)\)/,firefox:/line \d+ > eval line \d+ > eval:(\d+):(\d+)/,edge:/\(eval code:(\d+):(\d+)\)/};function s(e){var t=n[a.name];if(t&&e.stack){var _=t.exec(e.stack);if(_)return{line:_[1],column:_[2]}}else if("safari"===a.name)return{line:e.line,column:e.column}}},94:function(e,t,_){"use strict";var r=_(0),a=_(3),n=function(e){var t=e.x1,_=e.y1,r=e.x2,a=e.y2,n=e.setPixel,s=e.color,o=!1;if(Math.abs(t-r)<Math.abs(_-a)){var i=[_,t];t=i[0],_=i[1];var l=[a,r];r=l[0],a=l[1],o=!0}if(t>r){var c=[r,t];t=c[0],r=c[1];var u=[a,_];_=u[0],a=u[1]}for(var d=r-t,h=a-_,p=2*Math.abs(h),E=0,f=_,m=t;m<=r;m++)o?n(f,m,s):n(m,f,s),(E+=p)>d&&(a>_?f++:f--,E-=2*d)},s=_(4),o=function(e){var t=e.points,_=e.args,r=e.line;if(t.length){var a,n,o,i,l,c;switch(_.length){case 1:n=t.map(function(e){return Object(s.a)(e)}),a=_[0];break;case 2:o=Math.cos(_[0]/180*Math.PI),i=Math.sin(_[0]/180*Math.PI);var u=t.map(function(e){return e[0]}),d=t.map(function(e){return e[1]});l=(Math.min.apply(Math,u)+Math.max.apply(Math,u))/2,c=(Math.min.apply(Math,d)+Math.max.apply(Math,d))/2,n=t.map(function(e){return[(e[0]-l)*o-(e[1]-c)*i+l,(e[0]-l)*i+(e[1]-c)*o+c]}),a=_[1];break;case 3:throw Error("`polyStroke` found 3 arguments instead of 2, 3, or 5.");default:o=Math.cos(_[0]/180*Math.PI),i=Math.sin(_[0]/180*Math.PI),l=_[1],c=_[2],a=_[3],n=t.map(function(e){return[(e[0]-l)*o-(e[1]-c)*i+l,(e[0]-l)*i+(e[1]-c)*o+c]})}for(var h=1;h<t.length;h++)r(Math.round(n[h-1][0]),Math.round(n[h-1][1]),Math.round(n[h][0]),Math.round(n[h][1]),a);r(Math.round(n[n.length-1][0]),Math.round(n[n.length-1][1]),Math.round(n[0][0]),Math.round(n[0][1]),a)}},i=function(e){var t=e.cx,_=e.cy,r=e.radius,a=e.color,n=e.onlyStroke,s=e.setPixel,o=e.line,i=r-1,l=0,c=1,u=1,d=c-(r<<1),h=function(e,r){n?(s(t+e,_+r,a),s(t+e,_-r,a)):o(t+e,_+r,t+e,_-r,a)};if(2===r)h(-1,0),h(0,1),h(1,0);else if(3===r)h(-2,0),h(-2,1),h(-1,2),h(-0,2),h(1,2),h(2,1),h(2,0);else for(;i>=l;)h(i,l),h(-i,l),h(l,i),h(-l,i),d<=0&&(l++,d+=u,u+=2),d>0&&(i--,d+=(c+=2)-(r<<1))},l=_(14),c=_.n(l),u=function(e){var t=e.x,_=e.y,r=e.spriteIndex,a=e.darken,n=e.flipH,s=e.flipV,o=e.setPixel,i=e.sprites;i[r]&&i[r].slice(0,8).forEach(function(e,r){e.split("").forEach(function(e,i){if(" "!==e){var l=c()(+e-a,0,7);o(Math.floor(t)+(n?7-i:i),Math.floor(_)+(s?7-r:r),l)}})})},d={"<":[0,0,1,0,1,0,1,0,0,0,1,0,0,0,1,0,0,0],">":[1,0,0,0,1,0,0,0,1,0,1,0,1,0,0,0,0,0],"/":[0,0,0,0,0,1,0,1,0,0,1,0,1,0,0,0,0,0],":":[0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],"|":[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0],"(":[0,1,1,0,1,0,1,0,0,1,0,0],")":[1,0,0,1,0,1,0,1,1,0,0,0],0:[0,1,1,1,0,1,1,0,1,1,0,1,1,1,1,0,0,0],1:[1,1,0,0,1,0,0,1,0,0,1,0,1,1,1,0,0,0],2:[1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,0,0,0],3:[1,1,1,0,0,1,0,1,1,0,0,1,1,1,1,0,0,0],4:[1,0,1,1,0,1,1,1,1,0,0,1,0,0,1,0,0,0],5:[1,1,1,1,0,0,1,1,1,0,0,1,1,1,1,0,0,0],6:[1,0,0,1,0,0,1,1,1,1,0,1,1,1,1,0,0,0],7:[1,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0],8:[1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,0,0,0],9:[1,1,1,1,0,1,1,1,1,0,0,1,0,0,1,0,0,0]," ":[0,0,0,0,0,0,0,0,0,0,0,0],".":[0,0,0,0,1,0],",":[0,0,0,0,1,1],"+":[0,0,0,0,1,0,1,1,1,0,1,0,0,0,0,0,0,0],"-":[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0],"!":[1,1,1,0,1,0],"?":[1,1,0,1,1,1,0,0,1,0,0,0],a:[1,1,1,1,0,1,1,1,1,1,0,1,1,0,1,0,0,0],b:[1,1,0,1,0,1,1,1,0,1,0,1,1,1,1,0,0,0],c:[1,1,1,1,0,0,1,0,0,1,0,0,1,1,1,0,0,0],d:[1,1,0,1,0,1,1,0,1,1,0,1,1,1,1,0,0,0],e:[1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,0,0,0],f:[1,1,1,1,0,0,1,1,1,1,0,0,1,0,0,0,0,0],g:[1,1,1,1,0,0,1,0,1,1,0,1,1,1,1,0,0,0],h:[1,0,1,1,0,1,1,1,1,1,0,1,1,0,1,0,0,0],i:[1,1,1,0,1,0,0,1,0,0,1,0,1,1,1,0,0,0],j:[0,0,1,0,0,1,0,0,1,1,0,1,1,1,1,0,0,0],k:[1,0,1,1,0,1,1,1,0,1,0,1,1,0,1,0,0,0],l:[1,0,0,1,0,0,1,0,0,1,0,0,1,1,1,0,0,0],m:[1,0,1,1,1,1,1,1,1,1,0,1,1,0,1,0,0,0],n:[1,1,1,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0],o:[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1,0,0,0],p:[1,1,1,1,0,1,1,1,1,1,0,0,1,0,0,0,0,0],q:[1,1,1,1,0,1,1,0,1,1,0,1,0,1,1,0,0,0],r:[1,1,1,1,0,1,1,1,0,1,0,1,1,0,1,0,0,0],s:[1,1,1,1,0,0,1,1,1,0,0,1,1,1,1,0,0,0],t:[1,1,1,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0],u:[1,0,1,1,0,1,1,0,1,1,0,1,1,1,1,0,0,0],v:[1,0,1,1,0,1,1,0,1,1,0,1,1,1,0,0,0,0],w:[1,0,1,1,0,1,1,1,1,1,1,1,1,0,1,0,0,0],x:[1,0,1,1,0,1,0,1,0,1,0,1,1,0,1,0,0,0],y:[1,0,1,1,0,1,1,1,1,0,0,1,1,1,1,0,0,0],z:[1,1,1,0,0,1,0,1,0,1,0,0,1,1,1,0,0,0]},h=function(e){var t=e.x,_=e.y,r=e.letters,a=e.c,n=e.setPixel,s=Math.floor(t),o=Math.floor(_),i=!0,l=!1,c=void 0;try{for(var u,h=r.toString().split("")[Symbol.iterator]();!(i=(u=h.next()).done);i=!0){var p=u.value,E=d[p.toLowerCase()];if(E){for(var f=E.length/6,m=0;m<f;m++)for(var b=0;b<6;b++)E[b*f+m]&&n(s+m,o+b,a);s+=f+1}else s+=3}}catch(M){l=!0,c=M}finally{try{i||null==h.return||h.return()}finally{if(l)throw c}}};t.a=function(e){var t=e.pixels,_=e.width,s=e.height,l=e.sprites,c=e.map,d=void 0===c?[]:c,p=JSON.parse(JSON.stringify(d)),E=0,f=0,m=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e=Math.floor(e-E),r=Math.floor(r-f),!(e<0||e>=_||r<0||r>=s)){var o=a.a.int(n);o&&(t[r*_+e]=o)}},b=function(e,t,_,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;n({x1:e,y1:t,x2:_,y2:r,setPixel:m,color:a})},M=function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];e-E<-8||e-E>_||t-f<-8||t-f>s||u({x:e,y:t,spriteIndex:r,darken:a,flipH:n,flipV:o,setPixel:m,sprites:l})};return{camera:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;E=Math.floor(e),f=Math.floor(t)},clear:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;t.fill(a.a.int(e))},setPixel:m,getPixel:function(e,r){return e=Math.floor(e-E),r=Math.floor(r-f),e<0||e>=_||r<0||r>=s?7:a.a.lookupInt(t[r*s+e])},line:b,polyStroke:function(e){for(var t=arguments.length,_=new Array(t>1?t-1:0),r=1;r<t;r++)_[r-1]=arguments[r];o({points:e,args:_,line:b})},rectStroke:function(e,t,_,r){!function(e){var t=e.x,_=e.y,r=e.w,a=e.h,n=e.c,s=e.line,o=Math.floor(t),i=Math.floor(t+r-1),l=Math.floor(_),c=Math.floor(_+a-1);s(o,l,i,l,n),s(o,c,i,c,n),s(o,l,o,c,n),s(i,l,i,c,n)}({x:e,y:t,w:_,h:r,c:arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,line:b})},rectFill:function(e,t,_,r){!function(e){for(var t=e.x,_=e.y,r=e.w,a=e.h,n=e.c,s=e.line,o=Math.floor(t),i=Math.floor(t+r-1),l=Math.floor(_),c=Math.floor(_+a-1),u=o;u<=i;u++)s(u,l,u,c,n)}({x:e,y:t,w:_,h:r,c:arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,line:b})},circStroke:function(e,t,_){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i({cx:Math.floor(e),cy:Math.floor(t),radius:Math.floor(_),color:r,onlyStroke:!0,setPixel:m,line:b})},circFill:function(e,t,_){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i({cx:Math.floor(e),cy:Math.floor(t),radius:Math.floor(_),color:r,setPixel:m,line:b})},print:function(e,t,_){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;h({x:e,y:t,letters:_,c:r,setPixel:m})},sprite:M,getTile:function(e,t){var _=Object(r.get)(p,[t,e],null),a=null!==_?l[_]:null;return a&&(a.type=a[8]||0,a.number=_),a},setTile:function(e,t,_){p[t][e]=_},map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;arguments.length>1&&void 0!==arguments[1]&&arguments[1],p.forEach(function(t,_){t.forEach(function(t,r){null!==t&&M(8*(r+e),8*_,t)})})},resetMap:function(){p=JSON.parse(JSON.stringify(d))}}}},95:function(e,t,_){"use strict";var r=_(11),a=_(0),n=_(3),s=function(e){var t=e.cx,_=e.cy,r=e.radius,a=e.ctx,n=e.color,s=e.onlyStroke,o=r-1,i=0,l=1,c=1,u=l-(r<<1);a.fillStyle=n,a.strokeStyle=n;var d=function(e,t){a.fillRect(e,t,1,1)},h=function(e){var t=e.x0,_=e.x1,r=e.y;a.beginPath(),a.moveTo(t+1,r+.5),a.lineTo(_,r+.5),a.stroke()};if(2===r)d(t+1,_),d(t-1,_),d(t,_+1),d(t,_-1),s||d(t,_);else if(3===r)h({x0:t-2,x1:t+2,y:_-2}),h({x0:t-2,x1:t+2,y:_+2}),s?(d(t+2,_-1),d(t+2,_),d(t+2,_+1),d(t-2,_-1),d(t-2,_),d(t-2,_+1)):(h({x0:t-3,x1:t+3,y:_-1}),h({x0:t-3,x1:t+3,y:_}),h({x0:t-3,x1:t+3,y:_+1}));else for(;o>=i;)s?(d(t+o,_+i),d(t-o,_+i),d(t+i,_+o),d(t-i,_+o),d(t+o,_-i),d(t-o,_-i),d(t+i,_-o),d(t-i,_-o)):(h({x0:t+i,x1:t-i,y:_-o}),h({x0:t+o,x1:t-o,y:_-i}),h({x0:t+o,x1:t-o,y:_+i}),h({x0:t+i,x1:t-i,y:_+o})),u<=0&&(i++,u+=c,c+=2),u>0&&(o--,u+=(l+=2)-(r<<1))},o=function(e){var t=e.x1,_=e.y1,r=e.x2,a=e.y2,n=e.ctx,s=e.color;n.fillStyle=s;var o=!1;if(Math.abs(t-r)<Math.abs(_-a)){var i=[_,t];t=i[0],_=i[1];var l=[a,r];r=l[0],a=l[1],o=!0}if(t>r){var c=[r,t];t=c[0],r=c[1];var u=[a,_];_=u[0],a=u[1]}for(var d=r-t,h=a-_,p=2*Math.abs(h),E=0,f=_,m=t;m<=r;m++)o?n.fillRect(f,m,1,1):n.fillRect(m,f,1,1),(E+=p)>d&&(a>_?f++:f--,E-=2*d)},i=_(4),l=function(e){var t=e.points,_=e.args,r=e.ctx;if(t.length){var a,s,l,c,u,d;switch(_.length){case 1:s=t.map(function(e){return Object(i.a)(e)}),a=_[0];break;case 2:l=Math.cos(_[0]/180*Math.PI),c=Math.sin(_[0]/180*Math.PI);var h=t.map(function(e){return e[0]}),p=t.map(function(e){return e[1]});u=(Math.min.apply(Math,h)+Math.max.apply(Math,h))/2,d=(Math.min.apply(Math,p)+Math.max.apply(Math,p))/2,s=t.map(function(e){return[(e[0]-u)*l-(e[1]-d)*c+u,(e[0]-u)*c+(e[1]-d)*l+d]}),a=_[1];break;case 3:throw Error("`polyStroke` found 3 arguments instead of 2, 3, or 5.");default:l=Math.cos(_[0]/180*Math.PI),c=Math.sin(_[0]/180*Math.PI),u=_[1],d=_[2],a=_[3],s=t.map(function(e){return[(e[0]-u)*l-(e[1]-d)*c+u,(e[0]-u)*c+(e[1]-d)*l+d]})}for(var E=1;E<t.length;E++)o({x1:Math.round(s[E-1][0]),y1:Math.round(s[E-1][1]),x2:Math.round(s[E][0]),y2:Math.round(s[E][1]),ctx:r,color:n.a.rgb(a)});o({x1:Math.round(s[s.length-1][0]),y1:Math.round(s[s.length-1][1]),x2:Math.round(s[0][0]),y2:Math.round(s[0][1]),ctx:r,color:n.a.rgb(a)})}},c=_(7),u={"<":[0,0,1,0,1,0,1,0,0,0,1,0,0,0,1,0,0,0],">":[1,0,0,0,1,0,0,0,1,0,1,0,1,0,0,0,0,0],"/":[0,0,0,0,0,1,0,1,0,0,1,0,1,0,0,0,0,0],":":[0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],"|":[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0],"(":[0,1,1,0,1,0,1,0,0,1,0,0],")":[1,0,0,1,0,1,0,1,1,0,0,0],0:[0,1,1,1,0,1,1,0,1,1,0,1,1,1,1,0,0,0],1:[1,1,0,0,1,0,0,1,0,0,1,0,1,1,1,0,0,0],2:[1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,0,0,0],3:[1,1,1,0,0,1,0,1,1,0,0,1,1,1,1,0,0,0],4:[1,0,1,1,0,1,1,1,1,0,0,1,0,0,1,0,0,0],5:[1,1,1,1,0,0,1,1,1,0,0,1,1,1,1,0,0,0],6:[1,0,0,1,0,0,1,1,1,1,0,1,1,1,1,0,0,0],7:[1,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0],8:[1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,0,0,0],9:[1,1,1,1,0,1,1,1,1,0,0,1,0,0,1,0,0,0]," ":[0,0,0,0,0,0,0,0,0,0,0,0],".":[0,0,0,0,1,0],",":[0,0,0,0,1,1],"+":[0,0,0,0,1,0,1,1,1,0,1,0,0,0,0,0,0,0],"-":[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0],"!":[1,1,1,0,1,0],"?":[1,1,0,1,1,1,0,0,1,0,0,0],a:[1,1,1,1,0,1,1,1,1,1,0,1,1,0,1,0,0,0],b:[1,1,0,1,0,1,1,1,0,1,0,1,1,1,1,0,0,0],c:[1,1,1,1,0,0,1,0,0,1,0,0,1,1,1,0,0,0],d:[1,1,0,1,0,1,1,0,1,1,0,1,1,1,1,0,0,0],e:[1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,0,0,0],f:[1,1,1,1,0,0,1,1,1,1,0,0,1,0,0,0,0,0],g:[1,1,1,1,0,0,1,0,1,1,0,1,1,1,1,0,0,0],h:[1,0,1,1,0,1,1,1,1,1,0,1,1,0,1,0,0,0],i:[1,1,1,0,1,0,0,1,0,0,1,0,1,1,1,0,0,0],j:[0,0,1,0,0,1,0,0,1,1,0,1,1,1,1,0,0,0],k:[1,0,1,1,0,1,1,1,0,1,0,1,1,0,1,0,0,0],l:[1,0,0,1,0,0,1,0,0,1,0,0,1,1,1,0,0,0],m:[1,0,1,1,1,1,1,1,1,1,0,1,1,0,1,0,0,0],n:[1,1,1,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0],o:[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1,0,0,0],p:[1,1,1,1,0,1,1,1,1,1,0,0,1,0,0,0,0,0],q:[1,1,1,1,0,1,1,0,1,1,0,1,0,1,1,0,0,0],r:[1,1,1,1,0,1,1,1,0,1,0,1,1,0,1,0,0,0],s:[1,1,1,1,0,0,1,1,1,0,0,1,1,1,1,0,0,0],t:[1,1,1,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0],u:[1,0,1,1,0,1,1,0,1,1,0,1,1,1,1,0,0,0],v:[1,0,1,1,0,1,1,0,1,1,0,1,1,1,0,0,0,0],w:[1,0,1,1,0,1,1,1,1,1,1,1,1,0,1,0,0,0],x:[1,0,1,1,0,1,0,1,0,1,0,1,1,0,1,0,0,0],y:[1,0,1,1,0,1,1,1,1,0,0,1,1,1,1,0,0,0],z:[1,1,1,0,0,1,0,1,0,1,0,0,1,1,1,0,0,0]},d=function(e){var t=e.x,_=e.y,r=e.letters,a=e.c,s=e.ctx,o=n.a.triplet(a);r.toString().split("").map(function(e){var t=u[e.toLowerCase()];return{width:t?t.length/6:3,letter:e,pixels:t}}).reduce(function(e,t,_){var r=e[_-1],a=r?r.width+1+r.xOffset:0,n=r?r.yOffset:0;return[].concat(Object(i.a)(e),[Object(c.a)({},t,{xOffset:a,yOffset:n})])},[]).filter(function(e){return e.pixels}).forEach(function(e){var r=e.pixels,a=e.xOffset,n=e.yOffset,i=e.width,l=s.getImageData(t+a,_+n,i,6),c=l.data;r.map(function(e,t){return{pixel:e,pixelIndex:t}}).filter(function(e){return e.pixel}).forEach(function(e){var t=4*e.pixelIndex;c[t+0]=o[0],c[t+1]=o[1],c[t+2]=o[2],c[t+3]=255}),s.putImageData(l,t+a,_+n)})},h=_(14),p=_.n(h),E=function(e){var t=e.x,_=e.y,r=e.spriteIndex,a=e.darken,s=void 0===a?0:a,o=e.flipH,i=void 0!==o&&o,l=e.flipV,c=void 0!==l&&l,u=e.sprites,d=e.ctx;u[r]&&u[r].slice(0,8).forEach(function(e,r){e.split("").forEach(function(e,a){if(" "!==e){var o=p()(+e-s,0,7);d.fillStyle=n.a.rgb(o),d.fillRect(Math.floor(t)+(i?7-a:a),Math.floor(_)+(c?7-r:r),1,1)}})})};t.a=function(e){var t=e.ctx,_=e.width,i=e.height,c=e.sprites,u=e.map,h=void 0===u?[]:u,p=JSON.parse(JSON.stringify(h));t.setTransform(1,0,0,1,0,0);var f=0,m=0,b=document.createElement("canvas");b.width=_,b.height=i;var M=b.getContext("2d");return Object.entries(c).forEach(function(e){var t=Object(r.a)(e,2),_=t[0],a=t[1],s=+_;!function(e){var t=e.x,_=e.y,r=e.grid,a=e.ctx;r.slice(0,8).forEach(function(e,r){e.split("").forEach(function(e,s){" "!==e&&(a.fillStyle=n.a.rgb(+e),a.fillRect(Math.floor(t)+s,Math.floor(_)+r,1,1))})})}({x:s%16*8,y:8*Math.floor(s/16),grid:a,ctx:M})}),{polyStroke:function(e){for(var _=arguments.length,r=new Array(_>1?_-1:0),a=1;a<_;a++)r[a-1]=arguments[a];l({points:e,args:r,ctx:t})},getTile:function(e,t){var _=Object(a.get)(p,[t,e],null),r=null!==_?c[_]:null;return r&&(r.type=r[8]||0,r.number=_),r},setTile:function(e,t,_){p[t][e]=_},line:function(e,_,r,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;o({x1:Math.floor(e),y1:Math.floor(_),x2:Math.floor(r),y2:Math.floor(a),ctx:t,color:n.a.rgb(s)})},print:function(e,_,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;d({x:e-f,y:_-m,letters:r,c:a,ctx:t})},rectStroke:function(e,_,r,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;t.strokeStyle=n.a.rgb(s),t.strokeRect(Math.floor(e)+.5,Math.floor(_)+.5,Math.floor(r)-1,Math.floor(a)-1)},camera:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f=Math.floor(e),m=Math.floor(_),t.setTransform(1,0,0,1,0,0),t.translate(-f,-m)},rectFill:function(e,_,r,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;t.fillStyle=n.a.rgb(s),t.fillRect(Math.floor(e),Math.floor(_),Math.floor(r),Math.floor(a))},resetMap:function(){p=JSON.parse(JSON.stringify(h))},map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;arguments.length>1&&void 0!==arguments[1]&&arguments[1],p.forEach(function(_,r){_.forEach(function(_,a){if(null!==_){var n=_%16*8,s=8*Math.floor(_/16),o=8*(a+e),i=8*r;o+7>=f&&o<f+128&&i+7>=m&&i<m+128&&t.drawImage(b,n,s,8,8,o,i,8,8)}})})},sprite:function(e,_,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];E({x:e,y:_,spriteIndex:r,darken:a,flipH:n,flipV:s,sprites:c,ctx:t})},circStroke:function(e,_,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;s({cx:Math.floor(e),cy:Math.floor(_),radius:Math.floor(r),ctx:t,color:n.a.rgb(a),onlyStroke:!0})},circFill:function(e,_,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;s({cx:Math.floor(e),cy:Math.floor(_),radius:Math.floor(r),ctx:t,color:n.a.rgb(a)})},clear:function(e){t.save(),t.setTransform(1,0,0,1,0,0),Object(a.isNil)(e)?t.clearRect(0,0,_,i):(t.fillStyle=n.a.rgb(e),t.fillRect(0,0,128,128)),t.restore()},getPixel:function(e,_){return function(e){var t=e.x,_=e.y,a=e.ctx,s=Object(r.a)(a.getImageData(t,_,1,1).data,4),o=s[0],i=s[1],l=s[2],c=s[3];if(255!==c)return 7;var u=n.a.lookup([o,i,l,c]);return null===u?7:u}({x:Math.floor(e-f),y:Math.floor(_-m),ctx:t})},setPixel:function(e,_){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(e){var t=e.x,_=e.y,r=e.ctx,a=e.color;r.fillStyle=a,r.fillRect(t,_,1,1)}({x:Math.floor(e),y:Math.floor(_),ctx:t,color:n.a.rgb(r)})}}}},97:function(e,t,_){"use strict";var r=_(7),a=_(11),n=_(5),s=_(0),o=_.n(s),i=_(21),l={octaves:4,volumes:8,phrases:64,chains:64,songs:8,matrixLength:16,chainChannels:4,startOffset:"+0.1",startOffsetDouble:"+0.5",bpm:144,subdivision:"4n"},c={volume:function(e){return(e+1)/l.volumes},note:function(e){return e}},u={oscillator:{type:"triangle"},envelope:{release:.07}},d=function(e){return[1,2,3,5,8,13,21,34][e]},h=function(e){var t=new n.Synth(u);return e?t.chain(e,n.Master):t.chain(n.Master),t},p=function(e){var t=e.note,_=e.octave,r=e.volume,a=e.time,s=void 0===a?n.context.currentTime:a,o=e.synth,l=e.tempo;if(s>=n.context.currentTime){var u=c.volume(r),h=Object(i.a)(t+12*_,!0,!0),p=function(e){return 4*d(e)+"n"}(l);o.triggerAttackRelease(h,p,s,u)}};t.a=function(e){var t=o.a.range(l.chainChannels).map(function(){return h(e)}),_=h(e);n.Transport.bpm.value=l.bpm,n.Transport.start(l.startOffset);var s={},i={},c=[],u=function(){o.a.forEach(s,function(e,t){var _=e.sequence;_&&_.stop()})},E=function(e){var _=e.song,n=e.chains,s=e.phrases,i=o()(o.a.range(Math.pow(l.matrixLength,3))).map(function(e){var t=o.a.padStart(e.toString(l.matrixLength),3,0).split("").map(function(e){return parseInt(e,l.matrixLength)}),r=Object(a.a)(t,3),i=r[0],c=r[1],u=r[2],d=o.a.get(_,i),h=o.a.get(n,d),p=o.a.get(h,c);return o.a.range(l.chainChannels).map(function(e){var t,_=o.a.get(p,e);if(!o.a.isNil(_)){var r=o.a.get(s,_,{}),a=o.a.get(r.notes,u);o.a.isNil(a)||(t={channel:e,noteElement:a})}return t}).filter(function(e){return e})}).dropRightWhile(o.a.isEmpty).value();return{callback:function(e,_){i[_].forEach(function(_){var a=_.channel,n=_.noteElement;p(Object(r.a)({},n,{time:e,synth:t[a],tempo:0}))})},events:o.a.range(i.length),sequence:null}};return{playSong:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];u(),o.a.forEach(s,function(_,r){+r===e&&(_.sequence=new n.Sequence(_.callback,_.events,l.subdivision),_.sequence.loop=t,_.sequence.playbackRate=d(0),_.sequence.start(l.startOffset))})},makeSongs:function(e){var t=e.songs,_=e.chains,r=e.phrases;u(),i=r,s=o.a.mapValues(t,function(e){return E({song:e,chains:_,phrases:r})})},stopSong:u,playPhrase:function(e){var t=o.a.get(i,e);if(t){for(;c.length;)c.pop().dispose();var a=t.tempo,s=new n.Sequence(function(e,n){var s=t.notes[n];s&&p(Object(r.a)({},s,{time:e,synth:_,tempo:a}))},o.a.range(l.matrixLength),l.subdivision);s.loop=!1,s.playbackRate=d(a),s.start(),c.push(s)}}}}}},[[101,1,2]]]);
//# sourceMappingURL=main.83831d22.chunk.js.map